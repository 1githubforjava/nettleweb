/*! For license information please see out.js.LICENSE.txt */
https://nettleweb.com/


/*! Copyright (C) 2024 nettleweb.com; All rights reserved. !*/
"use strict";

(()=>{function e(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function t(){return new TransformStream({transform(t,n){!function(t,n){Vt&&t.data instanceof Blob?t.data.arrayBuffer().then(e).then(n):Wt&&(t.data instanceof ArrayBuffer||Gt(t.data))?n(e(t.data)):Jt(t,!1,(e=>{Zt||(Zt=new TextEncoder),n(Zt.encode(e))}))}(t,(e=>{const r=e.length;let o;if(r<126)o=new Uint8Array(1),
new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}t.data&&"string"!=typeof t.data&&(o[0]|=128),n.enqueue(o),n.enqueue(e)}))}})}function n(e){return e.reduce(((e,t)=>e+t.length),0)}function r(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],
r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}function i(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}function s(e,t){t.useNativeTimers?(e.setTimeoutFn=sn.bind(on),e.clearTimeoutFn=an.bind(on)):(e.setTimeoutFn=on.setTimeout.bind(on),e.clearTimeoutFn=on.clearTimeout.bind(on))}function a(){
return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function c(){}function l(){for(let e in fn.requests)fn.requests.hasOwnProperty(e)&&fn.requests[e].abort()}function d(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hn))return new XMLHttpRequest}catch(e){}if(!t)try{return new(on[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function u(e){if(e.length>8e3)throw"URI too long"
;const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=wn.exec(e||""),i={},s=14;for(;s--;)i[kn[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/")
;return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}function h(e){return _n&&(e instanceof ArrayBuffer||Ln(e))||jn&&e instanceof Blob||In&&e instanceof File}function p(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(p(e[t]))return!0;return!1}if(h(e))return!0
;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return p(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&p(e[t]))return!0;return!1}function f(e){const t=[],n=e.data,r=e;return r.data=m(n,t),r.attachments=t.length,{packet:r,buffers:t}}function m(e,t){if(!e)return e;if(h(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=m(e[r],t);return n}
if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=m(e[r],t));return n}return e}function g(e,t){return e.data=b(e.data,t),delete e.attachments,e}function b(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw Error("illegal attachments")}
if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=b(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=b(e[n],t));return e}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function w(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function k(e,t){"object"==typeof e&&(t=e,
e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=u(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host
;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=zn[o]&&i in zn[o].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new Fn(r,t):(zn[o]||(zn[o]=new Fn(r,t)),a=zn[o]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function E(){try{return"object"==typeof indexedDB}catch(e){return!1}}function C(){return new Promise(((e,t)=>{try{let n=!0
;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(T(n)&&T(i)){if(!x(n,i))return!1}else if(n!==i)return!1}
for(const e of r)if(!n.includes(e))return!1;return!0}function T(e){return null!==e&&"object"==typeof e}function A(e,t=er,n=tr){const r=t*Math.pow(n,e),o=Math.round(rr*r*(Math.random()-.5)*2);return Math.min(nr,r+o)}function _(e){return e&&e._delegate?e._delegate:e}function L(e){
return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(br||(br=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(xr(this),t),j(yr.get(this))}:function(...t){return j(e.apply(xr(this),t))}:function(t,...n){const r=e.call(xr(this),t,...n);return wr.set(r,t.sort?t.sort():[t]),j(r)}}function S(e){return"function"==typeof e?L(e):(e instanceof IDBTransaction&&function(e){
if(vr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));vr.set(e,t)}(e),mr(e,gr||(gr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Cr):e)}function j(e){
if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(j(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&yr.set(t,e)})).catch((()=>{})),Er.set(t,e),t}(e);if(kr.has(e))return kr.get(e);const t=S(e);return t!==e&&(kr.set(e,t),Er.set(t,e)),t}
function I(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=j(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(j(s.result),e.oldVersion,e.newVersion,j(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function O(e,t){
if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(_r.get(t))return _r.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Ar.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Tr.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return _r.set(t,i),i}function M(e,t){try{e.container.addComponent(t)}catch(n){
Or.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function P(e){const t=e.name;if(lo.has(t))return Or.debug(`There were multiple attempts to register component ${t}.`),!1;lo.set(t,e);for(const t of ao.values())M(t,e);for(const t of co.values())M(t,e);return!0}function D(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function B(e,t={}){let n=e;"object"!=typeof t&&(t={name:t})
;const r=Object.assign({name:io,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!=typeof o||!o)throw uo.create("bad-app-name",{appName:o+""});if(n||(n=Zn()),!n)throw uo.create("no-options");const i=ao.get(o);if(i){if(x(n,i.options)&&x(r,i.config))return i;throw uo.create("duplicate-app",{appName:o})}const s=new ar(o);for(const e of lo.values())s.addComponent(e);const a=new ho(n,r,s);return ao.set(o,a),a}function R(e,t,n){var r;let o=null!==(r=so[e])&&void 0!==r?r:e;n&&(o+="-"+n)
;const i=o.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${o}" with version "${t}":`];return i&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Or.warn(e.join(" "))}P(new or(o+"-version",(()=>({library:o,version:t})),"VERSION"))}function N(){return go||(go=I(po,fo,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(mo)}catch(e){}
}}).catch((e=>{throw uo.create("idb-open",{originalErrorMessage:e.message})}))),go}async function U(e,t){try{const n=(await N()).transaction(mo,"readwrite"),r=n.objectStore(mo);await r.put(t,F(e)),await n.done}catch(e){if(e instanceof $n)Or.warn(e.message);else{const t=uo.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Or.warn(t.message)}}}function F(e){return`${e.name}!${e.options.appId}`}function z(){return(new Date).toISOString().substring(0,10)}function H(e){
return Wn(JSON.stringify({version:2,heartbeats:e})).length}function q(e){return e instanceof $n&&e.code.includes("request-failed")}function V({projectId:e}){return`${To}/projects/${e}/installations`}function W(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function G(e,t){const n=(await t.json()).error;return _o.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,
serverStatus:n.status})}function J({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function X(e,{refreshToken:t}){const n=J(e);return n.append("Authorization",function(e){return`${xo} ${e}`}(t)),n}async function Z(e){const t=await e();return t.status>=500&&t.status<600?e():t}function K(e){return new Promise((t=>{setTimeout(t,e)}))}function $(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),
e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Lo.test(t)?t:So}catch(e){return So}}function Y(e){return`${e.appName}!${e.appId}`}function Q(e,t){const n=Y(e);ee(n,t),function(e,t){const n=te();n&&n.postMessage({key:e,fid:t}),ne()}(n,t)}function ee(e,t){const n=jo.get(e);if(n)for(const e of n)e(t)}function te(){
return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=e=>{ee(e.data.key,e.data.fid)}),Io}function ne(){0===jo.size&&Io&&(Io.close(),Io=null)}function re(){return Do||(Do=I(Oo,Mo,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Po)}})),Do}async function oe(e,t){const n=Y(e),r=(await re()).transaction(Po,"readwrite"),o=r.objectStore(Po),i=await o.get(n);return await o.put(t,n),await r.done,i&&i.fid===t.fid||Q(e,t.fid),t}async function ie(e){
const t=Y(e),n=(await re()).transaction(Po,"readwrite");await n.objectStore(Po).delete(t),await n.done}async function se(e,t){const n=Y(e),r=(await re()).transaction(Po,"readwrite"),o=r.objectStore(Po),i=await o.get(n),s=t(i);return void 0===s?await o.delete(n):await o.put(s,n),await r.done,!s||i&&i.fid===s.fid||Q(e,s.fid),s}async function ae(e){let t;const n=await se(e.appConfig,(n=>{const r=function(e){const t=e||{fid:$(),registrationStatus:0};return de(t)}(n),o=function(e,t){
if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(_o.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=V(e),o=J(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={fid:n,authVersion:xo,appId:e.appId,
sdkVersion:Co},a={method:"POST",headers:o,body:JSON.stringify(s)},c=await Z((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:W(e.authToken)}}throw await G("Create Installation",c)}(e,t);return oe(e.appConfig,n)}catch(n){throw q(n)&&409===n.customData.serverCode?await ie(e.appConfig):await oe(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}
return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ce(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}));return n.fid===So?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ce(e){let t=await le(e.appConfig);for(;1===t.registrationStatus;)await K(100),t=await le(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ae(e);return n||t}return t}function le(e){
return se(e,(e=>{if(!e)throw _o.create("installation-not-found");return de(e)}))}function de(e){return 1===(t=e).registrationStatus&&t.registrationTime+Eo<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ue({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${V(e)}/${t}/authTokens:generate`}(e,n),o=X(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{
sdkVersion:Co,appId:e.appId}},a={method:"POST",headers:o,body:JSON.stringify(s)},c=await Z((()=>fetch(r,a)));if(c.ok)return W(await c.json());throw await G("Generate Auth Token",c)}async function he(e,t=!1){let n;const r=await se(e.appConfig,(r=>{if(!fe(r))throw _o.create("not-registered");const o=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ao}(e)}(o))return r
;if(1===o.requestStatus)return n=async function(e,t){let n=await pe(e.appConfig);for(;1===n.authToken.requestStatus;)await K(100),n=await pe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?he(e,t):r}(e,t),r;{if(!navigator.onLine)throw _o.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await ue(e,t),r=Object.assign(Object.assign({},t),{
authToken:n});return await oe(e.appConfig,r),n}catch(n){if(!q(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await oe(e.appConfig,n)}else await ie(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function pe(e){return se(e,(e=>{if(!fe(e))throw _o.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Eo<Date.now()?Object.assign(Object.assign({},e),{
authToken:{requestStatus:0}}):e;var n}))}function fe(e){return void 0!==e&&2===e.registrationStatus}async function me(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await ae(e);t&&await t}(n),(await he(n,t)).token}function ge(e){return _o.create("missing-app-config-values",{valueName:e})}function be(e){if(!e.startsWith(qo)){const t=Wo.create("invalid-gtag-resource",{gtagURL:e});return Vo.warn(t.message),""}return e}function ye(e){
return Promise.all(e.map((e=>e.catch((e=>e)))))}function ve(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:be}),r=document.createElement("script"),o=`${qo}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function we(e,t,n,r){return async function(o,...i){try{if("event"===o){const[r,o]=i;await async function(e,t,n,r,o){try{let i=[]
;if(o&&o.send_to){let e=o.send_to;Array.isArray(e)||(e=[e]);const r=await ye(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),o=e&&t[e.appId];if(!o){i=[];break}i.push(o)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,o||{})}catch(e){Vo.error(e)}}(e,t,n,r,o)}else if("config"===o){const[o,s]=i;await async function(e,t,n,r,o,i){const s=r[o];try{if(s)await t[s];else{const e=(await ye(n)).find((e=>e.measurementId===o));e&&await t[e.appId]}}catch(e){Vo.error(e)}
e("config",o,i)}(e,t,n,r,o,s)}else if("consent"===o){const[t,n]=i;e("consent",t,n)}else if("get"===o){const[t,n,r]=i;e("get",t,n,r)}else if("set"===o){const[t]=i;e("set",t)}else e(o,...i)}catch(e){Vo.error(e)}}}function ke(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ee(e,t=Jo,n){const{appId:r,apiKey:o,measurementId:i}=e.options;if(!r)throw Wo.create("no-app-id");if(!o){if(i)return{measurementId:i,appId:r};throw Wo.create("no-api-key")}
const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xo;return setTimeout((async()=>{a.abort()}),void 0!==n?n:zo),Ce({appId:r,apiKey:o,measurementId:i},s,a,t)}async function Ce(e,{throttleEndTimeMillis:t,backoffCount:n},r,o=Jo){var i;const{appId:s,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const o=Math.max(t-Date.now(),0),i=setTimeout(n,o);e.addEventListener((()=>{clearTimeout(i),r(Wo.create("fetch-throttle",{
throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(a)return Vo.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:s,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:ke(r)},i=Ho.replace("{app-id}",n),s=await fetch(i,o);if(200!==s.status&&304!==s.status){
let e="";try{const n=await s.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Wo.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return o.deleteThrottleMetadata(s),t}catch(t){const c=t;if(!function(e){if(!(e instanceof $n&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(o.deleteThrottleMetadata(s),
a)return Vo.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:s,measurementId:a};throw t}const l=503===Number(null===(i=null==c?void 0:c.customData)||void 0===i?void 0:i.httpStatus)?A(n,o.intervalMillis,Go):A(n,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return o.setThrottleMetadata(s,d),
Vo.debug(`Calling attemptFetch again in ${l} millis`),Ce(e,d,r,o)}}function xe(e){Ko=e}function Te(e){Zo=e}async function Ae(e,t,n,r,o,i,s){var a;const c=Ee(e);c.then((t=>{n[t.measurementId]=t.appId,
e.options.measurementId&&t.measurementId!==e.options.measurementId&&Vo.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Vo.error(e))),t.push(c);const l=async function(){
if(!E())return Vo.warn(Wo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await C()}catch(e){return Vo.warn(Wo.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,u]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(qo)&&n.src.includes(e))return n;return null
})(i)||ve(i,d.measurementId),Ko&&(o("consent","default",Ko),xe(void 0)),o("js",new Date);const h=null!==(a=null==s?void 0:s.config)&&void 0!==a?a:{};return h[Fo]="firebase",h.update=!0,null!=u&&(h[Uo]=u),o("config",d.measurementId,h),Zo&&(o("set",Zo),Te(void 0)),d.measurementId}function _e(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id
}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Wo.create("invalid-analytics-context",{errorInfo:t});Vo.warn(n.message)}}function Le(e,t,n){_e();const r=e.options.appId;if(!r)throw Wo.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Wo.create("no-api-key")
;Vo.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Yo[r])throw Wo.create("already-exists",{id:r});if(!ii){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ri);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,o){let i=function(){
window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(i=window[o]),window[o]=we(i,e,t,n),{gtagCore:i,wrappedGtag:window[o]}}(Yo,Qo,ei,ri,oi);ni=e,ti=t,ii=!0}return Yo[r]=Ae(e,Qo,ei,t,ti,ri,n),new $o(e)}function Se(e=function(e=io){const t=ao.get(e);if(!t&&e===io&&Zn())return B();if(!t)throw uo.create("no-app",{appName:e});return t}()){const t=D(e=_(e),No);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=D(e,No);if(n.isInitialized()){
const e=n.getImmediate();if(x(t,n.getOptions()))return e;throw Wo.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function je(e,t,n,r){e=_(e),async function(e,t,n,r,o){if(o&&o.global)e("event",n,r);else{const o=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}}(ni,Yo[e.app.options.appId],t,n,r).catch((e=>Vo.error(e)))}function Ie(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function Oe(e){
if("number"!=typeof e)throw Error("expected a number, got: "+e)}function Me(e){return function(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}(e,(e=>e.unicode))}function Pe(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function De(e){const t=await new Promise(((t,n)=>{const r=indexedDB.open(e,ci);_i[e]=r,r.onupgradeneeded=e=>{e.oldVersion<li&&function(e){function t(t,n,r){
const o=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(r)for(const[e,[t,n]]of Object.entries(r))o.createIndex(e,t,{multiEntry:n});return o}t(ui),t(di,mi,{[fi]:[pi,!0],[vi]:[[bi,yi]],[Ti]:[Ai,!0]}),t(hi,void 0,{[gi]:[""]})}(r.result)},Pe(t,n,r)}));return t.onclose=()=>Re(e),t}function Be(e,t,n,r){return new Promise(((o,i)=>{const s=e.transaction(t,n,{durability:"relaxed"}),a="string"==typeof t?s.objectStore(t):t.map((e=>s.objectStore(e)));let c;r(a,s,(e=>{c=e})),
s.oncomplete=()=>o(c),s.onerror=()=>i(s.error)}))}function Re(e){const t=_i[e],n=t&&t.result;if(n){n.close();const t=Si[e];if(t)for(const e of t)e()}delete _i[e],delete Li[e],delete Si[e]}function Ne(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||ji.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase())).filter(Boolean)}function Ue(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=Ii))}function Fe(e,t,n,r){
e[t](n).onsuccess=e=>r&&r(e.target.result)}function ze(e,t,n){Fe(e,"get",t,n)}function He(e,t,n){Fe(e,"getAll",t,n)}function qe(e){e.commit&&e.commit()}function Ve(e,t){const n=function(e,t){let n=e[0];for(let r=1;r<e.length;r++){const o=e[r];t(n)>t(o)&&(n=o)}return n}(e,(e=>e.length)),r=[];for(const o of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(o)))))||r.push(o);return r}async function We(e,t,n,r){try{const o=function(e){
const t=e.map((({annotation:e,emoticon:t,group:n,order:r,shortcodes:o,skins:i,tags:s,emoji:a,version:c})=>{const l={annotation:e,group:n,order:r,tags:s,tokens:[...new Set(Ue([...(o||[]).map(Ne).flat(),...(s||[]).map(Ne).flat(),...Ne(e),t]))].sort(),unicode:a,version:c};if(t&&(l.emoticon=t),o&&(l.shortcodes=o),i){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:e,emoji:t,version:n}of i)l.skinTones.push(e),l.skinUnicodes.push(t),l.skinVersions.push(n)}return l}));return t}(t)
;await Be(e,[di,ui],xi,(([e,t],i)=>{function s(){2==++l&&function(){if(a!==r||c!==n){e.clear();for(const t of o)e.put(t);t.put(r,wi),t.put(n,ki),qe(i)}}()}let a,c,l=0;ze(t,wi,(e=>{a=e,s()})),ze(t,ki,(e=>{c=e,s()}))}))}finally{}}async function Ge(e,t){const n=Ue(Ne(t));return n.length?Be(e,di,Ci,((e,t,r)=>{const o=[],i=()=>{const e=Ve(o,(e=>e.unicode));r(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){
const r=n[t],s=t===n.length-1?IDBKeyRange.bound(r,r+"\uffff",!1,!0):IDBKeyRange.only(r);He(e.index(fi),s,(e=>{o.push(e),o.length===n.length&&i()}))}})):[]}async function Je(e,t){const n=await Ge(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return Be(e,di,Ci,((e,n,r)=>{let o;const i=()=>{e.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(o=e.unicode,t(e))return r(e)
;if(n.length<50)return r();i()}};i()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}function Xe(e,t,n){return Be(e,t,Ci,((e,t,r)=>ze(e,n,r)))}function Ze(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||Mi.some((t=>!(t in e[0]))));if(!t||n)throw Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),r=function(e,t){
const n=new Map;for(const r of e){const e=t(r);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const r=t.charAt(n);let o=e.get(r);o||(o=new Map,e.set(r,o)),e=o}let o=e.get(Oi);o||(o=[],e.set(Oi,o)),o.push(r)}}return(e,t)=>{let r=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),o=r.get(n);if(!o)return[];r=o}if(t)return r.get(Oi)||[];const o=[],i=[r];for(;i.length;){const e=[...i.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)t===Oi?o.push(...n):i.push(n)}return o}
}(e,(e=>{const t=new Set;if(e.shortcodes)for(const n of e.shortcodes)for(const e of Ne(n))t.add(e);return t})),o=e=>r(e,!0),i=e=>r(e,!1),s=new Map,a=new Map;for(const t of e){a.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])s.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=Ne(e),r=n.map(((e,t)=>(t<n.length-1?o:i)(e)));return Ve(r,(e=>e.name)).sort(t)},byShortcode:e=>s.get(e.toLowerCase()),byName:e=>a.get(e.toLowerCase())}}function Ke(e){if(!e)return e
;if(Pi&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function $e(e,t){if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function Ye(e){const t=await fetch(e);$e(t,e);const n=t.headers.get("etag"),r=await t.json();return function(e){
if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||Di.some((t=>!(t in e[0]))))throw Error("Emoji data is in the wrong format")}(r),[n,r]}async function Qe(e){let t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}async function et(e,t){
let n,r=await async function(e){const t=await fetch(e,{method:"HEAD"});$e(t,e);const n=t.headers.get("etag");return n}(t);if(!r){const e=await Ye(t);r=e[0],n=e[1],r||(r=await Qe(n))}await async function(e,t,n){const[r,o]=await Promise.all([wi,ki].map((t=>Xe(e,ui,t))));return r===n&&o===t}(e,t,r)||(n||(n=(await Ye(t))[1]),await We(e,n,t,r))}function tt(e){return e.unicode.includes("\u200d")}function nt(e){const t=Vi(e,"#000"),n=Vi(e,"#fff");return t&&n&&Wi(t,n)}function rt(e){e.preventDefault(),
e.stopPropagation()}function ot(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function it(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}function st(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function at(e,t,n){let r=e.get(t);return r||(r=n(),e.set(t,r)),r}function ct(e){return""+e}function lt(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,o=!1;r?o=function(e,t){
let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(o=!0,t.targetNode=void 0,t.targetParentNode=r=n.parentNode),o&&function(e,t){ss?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}function dt(e){let t="",n=!1,r=!1,o=-1;const i=new Map,s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];if(t+=l,a===c-1)break;for(let e=0;e<l.length;e++)switch(l.charAt(e)){case"<":"/"===l.charAt(e+1)?s.pop():(n=!0,s.push(++o));break;case">":n=!1,r=!1;break
;case"=":r=!0}const d=at(i,s[s.length-1],(()=>[]));let u,h,p;if(r){const t=/(\S+)="?([^"=]*)$/.exec(l);u=t[1],h=t[2],p=/^[^">]*/.exec(e[a+1])[0]}const f={attributeName:u,attributeValuePre:h,attributeValuePost:p,expressionIndex:a};d.push(f),n||r||(t+=" ")}const a=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:a,elementsToBindings:i}}function ut(e,t,n){for(let r=0;r<e.length;r++){const o=e[r],i={binding:o,targetNode:o.attributeName?t:t.firstChild,
targetParentNode:void 0,currentExpression:void 0};n.push(i)}}function ht(e){const{template:t,elementsToBindings:n}=at(rs,e,(()=>dt(e))),r=t.cloneNode(!0).content.firstElementChild,o=function(e,t){const n=[];let r;if(1===t.size&&(r=t.get(0)))ut(r,e,n);else{const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let o=e,i=-1;do{const e=t.get(++i);e&&ut(e,o,n)}while(o=r.nextNode())}return n}(r,n);return function(e){return function(e,t){for(const n of t){
const{targetNode:t,currentExpression:r,binding:{expressionIndex:o,attributeName:i,attributeValuePre:s,attributeValuePost:a}}=n,c=e[o];if(r!==c)if(n.currentExpression=c,i)t.setAttribute(i,s+ct(c)+a);else{let e;Array.isArray(c)?lt(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=ct(c),e&&(n.targetNode=e)}}}(e,o),r}}function pt(e,t,n,r,o,i,s,a,c){function l(e,n,r){
return f(e,((e,o)=>p`<button role="${n?"option":"menuitem"}" aria-selected="${n?o===t.activeSearchItem:""}" aria-label="${d(e,t.currentSkinTone)}" title="${u(e)}" class="${"emoji"+(n&&o===t.activeSearchItem?" active":"")+(e.unicode?"":" custom-emoji")}" id="${`${r}-${e.id}`}" style="${e.unicode?"":`--custom-emoji-background: url(${JSON.stringify(e.url)})`}">${e.unicode?h(e,t.currentSkinTone):""}</button>`),(e=>`${r}-${e.id}`))}
const{labelWithSkin:d,titleForEmoji:u,unicodeWithSkin:h}=n,{html:p,map:f}=function(e){const t=at(os,e,(()=>new Map));let n=is;return{map:function(e,t,r){return e.map(((e,o)=>{const i=n;n=r(e);try{return t(e,o)}finally{n=i}}))},html:function(e,...r){const o=at(t,e,(()=>new Map));return at(o,n,(()=>ht(e)))(r)}}
}(t),m=p`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?"emo-"+t.activeSearchItemId:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(t.skinTones,((e,n)=>p`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(t.groups,(e=>p`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":"tab-"+t.currentGroup.id}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(t.currentEmojisWithCategories,((e,n)=>p`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===n||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${"--num-rows: "+Math.ceil(e.emojis.length/t.numColumns)}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${l(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${l(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`,g=(t,n)=>{
for(const r of e.querySelectorAll(`[${t}]`))n(r,r.getAttribute(t))};if(c){e.appendChild(m);for(const e of["click","focusout","input","keydown","keyup"])g("data-on-"+e,((t,n)=>{t.addEventListener(e,r[n])}));g("data-ref",((e,t)=>{i[t]=e})),s.addEventListener("abort",(()=>{e.removeChild(m)}))}g("data-action",((e,t)=>{let n=a.get(t);n||a.set(t,n=new WeakSet),n.has(e)||(n.add(e),o[t](e))}))}function ft(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1
;return!0}function mt(e,t){function n(){const{customEmoji:e,database:t}=h,n=e||ls;t.customEmoji!==n&&(t.customEmoji=n)}function r(e){const t=function(e,t,n){let r=!0;for(const o of e){const e=st(n(o));void 0===ts&&(ts=st(t));const i=e/1.8<ts;Xi.set(o.unicode,i),i||(r=!1)}return r}(e,l.baselineEmoji,g);t?_():h.currentEmojis=[...h.currentEmojis]}function o(e){return!e.unicode||!tt(e)||Xi.get(e.unicode)}async function i(e){const t=h.emojiVersion||await Ji()
;return e.filter((({version:e})=>!e||e<=t))}async function s(e){return function(e,t){const n=e=>{const n={};for(const r of e)"number"==typeof r.tone&&r.version<=t&&(n[r.tone]=r.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:r,url:o,name:i,category:s,annotation:a})=>({unicode:e,name:i,shortcodes:r,url:o,category:s,annotation:a,id:e||i,skins:t&&n(t)})))}(e,h.emojiVersion||await Ji())}async function a(e){
const t=await h.database.getEmojiByUnicodeOrName(e),n=[...h.currentEmojis,...h.currentFavorites].find((t=>t.id===e)),r=n.unicode&&E(n,h.currentSkinTone);await h.database.incrementFavoriteEmojiCount(e),b("emoji-click",{emoji:t,skinTone:h.currentSkinTone,...r&&{unicode:r},...n.name&&{name:n.name}})}function c(e){h.currentSkinTone=e,h.skinTonePickerExpanded=!1,m("skintone-button"),b("skin-tone-change",{skinTone:e}),h.database.setPreferredSkinTone(e)}
const l={},d=new AbortController,u=d.signal,{state:h,createEffect:p}=function(e){let t,n=!1;const r=new Map,o=new Set;let i;const s=()=>{if(n)return;const e=[...o];o.clear();try{for(const t of e)t()}finally{i=!1,o.size&&(i=!0,as(s))}},a=new Proxy({},{get(e,n){if(t){let e=r.get(n);e||(e=new Set,r.set(n,e)),e.add(t)}return e[n]},set(e,t,n){if(e[t]!==n){e[t]=n;const a=r.get(t);if(a){for(const e of a)o.add(e);i||(i=!0,as(s))}}return!0}});return e.addEventListener("abort",(()=>{n=!0})),{state:a,
createEffect:e=>{const n=()=>{const r=t;t=n;try{return e()}finally{t=r}};return n()}}}(u),f=new Map;ds(h,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),ds(h,t),ds(h,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,
skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:Ni,databaseLoaded:!1,activeSearchItemId:void 0}),p((()=>{h.currentGroup!==h.groups[h.currentGroupIndex]&&(h.currentGroup=h.groups[h.currentGroupIndex])}));const m=t=>{e.getElementById(t).focus()},g=t=>e.getElementById("emo-"+t.id),b=(e,t)=>{l.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0
}))},y=(e,t)=>e.id===t.id,v=(e,t)=>{const{category:n,emojis:r}=e,{category:o,emojis:i}=t;return n===o&&ft(r,i,y)},w=e=>{ft(h.currentEmojis,e,y)||(h.currentEmojis=e)},k=e=>{h.searchMode!==e&&(h.searchMode=e)},E=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,C={labelWithSkin:(e,t)=>{return(n=[e.name||E(e,t),e.annotation,...e.shortcodes||ls].filter(Boolean),it(n,(e=>e))).join(", ");var n},titleForEmoji:e=>e.annotation||(e.shortcodes||ls).join(", "),unicodeWithSkin:E},x={onClickSkinToneButton:function(e){
h.skinTonePickerExpanded=!h.skinTonePickerExpanded,h.activeSkinTone=h.currentSkinTone,h.skinTonePickerExpanded&&(rt(e),es((()=>m("skintone-list"))))},onEmojiClick:async function(e){const{target:t}=e;t.classList.contains("emoji")&&(rt(e),a(t.id.substring(4)))},onNavClick:function(e){const{target:t}=e,n=t.closest(".nav-button");if(!n)return;const r=parseInt(n.dataset.groupId,10);l.searchElement.value="",h.rawSearchText="",h.searchText="",h.activeSearchItem=-1,
h.currentGroupIndex=h.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,r=t=>{t&&(rt(e),t.focus())};switch(n){case"ArrowLeft":return r(t.previousElementSibling);case"ArrowRight":return r(t.nextElementSibling);case"Home":return r(t.parentElement.firstElementChild);case"End":return r(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!h.searchMode||!h.currentEmojis.length)return;const t=t=>{rt(e),
h.activeSearchItem=ot(t,h.activeSearchItem,h.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==h.activeSearchItem)return rt(e),a(h.currentEmojis[h.activeSearchItem].id);h.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);n&&(rt(e),c(parseInt(n[1],10)))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e;t&&"skintone-list"===t.id||(h.skinTonePickerExpanded=!1)},
onSkinToneOptionsKeydown:function(e){if(!h.skinTonePickerExpanded)return;const t=async t=>{rt(e),h.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(ot(!0,h.activeSkinTone,h.skinTones));case"ArrowDown":return t(ot(!1,h.activeSkinTone,h.skinTones));case"Home":return t(0);case"End":return t(h.skinTones.length-1);case"Enter":return rt(e),c(h.activeSkinTone);case"Escape":return rt(e),h.skinTonePickerExpanded=!1,m("skintone-button")}},onSkinToneOptionsKeyup:function(e){
if(h.skinTonePickerExpanded)return" "===e.key?(rt(e),c(h.activeSkinTone)):void 0},onSearchInput:function(e){h.rawSearchText=e.target.value}},T={calculateEmojiGridStyle:function(e){!function(e,t,n){let r;ns?(r=new ResizeObserver(n),r.observe(e)):es(n),t.addEventListener("abort",(()=>{r&&r.disconnect()}))}(e,u,(()=>{{const e=getComputedStyle(l.rootElement),t=parseInt(e.getPropertyValue("--num-columns"),10),n="rtl"===e.getPropertyValue("direction");h.numColumns=t,h.isRtl=n}}))},
updateOnIntersection:function(e){!function(e,t,n){{const r=e.closest(".tabpanel");let o=cs.get(r);o||(o=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),cs.set(r,o),t.addEventListener("abort",(()=>{o.disconnect()}))),o.observe(e)}}(e,u,(e=>{for(const{target:t,isIntersecting:n}of e)t.classList.toggle("onscreen",n)}))}};let A=!0;p((()=>{pt(e,h,C,x,T,l,u,f,A),A=!1})),h.emojiVersion||Ji().then((e=>{e||(h.message=h.i18n.emojiUnsupportedMessage)})),p((()=>{
h.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,h.message=h.i18n.loadingMessage}),1e3);try{await h.database.ready(),h.databaseLoaded=!0}catch(e){h.message=h.i18n.networkErrorMessage}finally{clearTimeout(t),e&&(e=!1,h.message="")}}()})),p((()=>{h.pickerStyle=`\n      --num-groups: ${h.groups.length}; \n      --indicator-opacity: ${h.searchMode?0:1}; \n      --num-skintones: 6;`})),p((()=>{h.customEmoji&&h.database&&n()})),p((()=>{
h.customEmoji&&h.customEmoji.length?h.groups!==Ri&&(h.groups=Ri):h.groups!==Ni&&(h.currentGroupIndex&&h.currentGroupIndex--,h.groups=Ni)})),p((()=>{!async function(){h.databaseLoaded&&(h.currentSkinTone=await h.database.getPreferredSkinTone())}()})),p((()=>{h.skinTones=[,,,,,,].fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf($i);return-1!==n?e.substring(0,n)+String.fromCodePoint(Yi+t-1)+e.substring(n):(e.endsWith(Zi)&&(e=e.substring(0,e.length-1)),
e+Ki+String.fromCodePoint(Qi+t-1))}(h.skinToneEmoji,t)))})),p((()=>{h.skinToneButtonText=h.skinTones[h.currentSkinTone]})),p((()=>{h.skinToneButtonLabel=h.i18n.skinToneLabel.replace("{skinTone}",h.i18n.skinTones[h.currentSkinTone])})),p((()=>{h.databaseLoaded&&async function(){const{database:e}=h,t=(await Promise.all(zi.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);h.defaultFavoriteEmojis=t}()})),p((()=>{h.databaseLoaded&&h.defaultFavoriteEmojis&&async function(){n()
;const{database:e,defaultFavoriteEmojis:t,numColumns:r}=h,o=await e.getTopFavoriteEmoji(r),i=await s(it([...o,...t],(e=>e.unicode||e.name)).slice(0,r));h.currentFavorites=i}()})),p((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:r}=h;if(n)if(e.length>=2){const t=await async function(e){return s(await i(await h.database.getEmojiBySearchQuery(e)))}(e);h.searchText===e&&(w(t),k(!0))}else{const{id:e}=t;if(-1!==e||r&&r.length){const t=await async function(e){
const t=-1===e?h.customEmoji:await h.database.getEmojiByGroup(e);return s(await i(t))}(e);h.currentGroup.id===e&&(w(t),k(!1))}}else h.currentEmojis=[],h.searchMode=!1}()}));const _=()=>{es((()=>{var e;(e=l.tabpanelElement)&&(e.scrollTop=0)}))};return p((()=>{const{currentEmojis:e,emojiVersion:t}=h,n=e.filter((e=>e.unicode)).filter((e=>tt(e)&&!Xi.has(e.unicode)));if(!t&&n.length)w(e),es((()=>r(n)));else{const n=t?e:e.filter(o);w(n),_()}})),p((()=>{})),p((()=>{const e=function(){
const{searchMode:e,currentEmojis:t}=h;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>h.customCategorySorting(e.category,t.category)))}();(e=>{ft(h.currentEmojisWithCategories,e,v)||(h.currentEmojisWithCategories=e)})(e)})),p((()=>{h.activeSearchItemId=-1!==h.activeSearchItem&&h.currentEmojis[h.activeSearchItem].id})),p((()=>{
const{rawSearchText:e}=h;Ui((()=>{h.searchText=(e||"").trim(),h.activeSearchItem=-1}))})),p((()=>{h.skinTonePickerExpanded?l.skinToneDropdown.addEventListener("transitionend",(()=>{h.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):h.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){ds(h,e)},$destroy(){d.abort()}}}function gt(e){let t=0,n="";for(;t<e.byteLength;){const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1];n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){
const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}function bt(e){try{return new DataView(e,0,0),!0}catch(e){return!1}}function yt(e,t){const n=function(e){const t=[];for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),
t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)}(t),r=new DataView(new ArrayBuffer(4),0,4);r.setUint32(0,n.byteLength,!0),e.write(r),e.write(n)}function vt(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,102),n.setUint32(1,t.byteLength,!0),e.write(n),e.write(t)}function wt(e,t){switch(typeof t){case"string":e.write(101),yt(e,t)
;break;case"boolean":e.write([10,t?1:0]);break;case"undefined":e.write(0);break;case"number":{if(Number.isSafeInteger(t))if(t>=0){if(t<=255){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,10),n.setUint8(1,t),void e.write(n)}if(t<=65535){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,11),n.setUint16(1,t,!0),void e.write(n)}if(t<=4294967295){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,12),n.setUint32(1,t,!0),void e.write(n)}}else{
if(t>=-128&&t<128){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,20),n.setInt8(1,t),void e.write(n)}if(t>=-32768&&t<32768){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,21),n.setInt16(1,t,!0),void e.write(n)}if(t>=-2147483648&&t<2147483648){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,22),n.setInt32(1,t,!0),void e.write(n)}}const n=new DataView(new ArrayBuffer(9),0,9);n.setUint8(0,33),n.setFloat64(1,t,!0),e.write(n)}break;case"bigint":{
const n=new DataView(new ArrayBuffer(9),0,9);t>=0n?(n.setUint8(0,13),n.setBigUint64(1,t,!0)):(n.setUint8(0,23),n.setBigUint64(1,t,!0)),e.write(n)}break;case"object":null===t?e.write(255):Array.isArray(t)?function(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,99),n.setUint32(1,t.length,!0),e.write(n);for(const n of t)wt(e,n)}(e,t):bt(t)?vt(e,new Uint8Array(t)):ArrayBuffer.isView(t)?vt(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)):function(e,t){
if("function"==typeof t.toJSON)return void wt(e,t.toJSON());const n=Object.keys(t);{const t=new DataView(new ArrayBuffer(5),0,5);t.setUint8(0,100),t.setUint32(1,n.length,!0),e.write(t)}for(const r of n){const n=t[r];switch(typeof n){case"bigint":case"number":case"object":case"string":case"boolean":case"undefined":yt(e,r),wt(e,n)}}}(e,t)}}function kt(e){const t=e.read();switch(t){case 0:return;case 255:return null;case 10:return e.read();case 11:return e.readNBytesDV(2).getUint16(0,!0);case 12:
return e.readNBytesDV(4).getUint32(0,!0);case 13:return e.readNBytesDV(8).getBigUint64(0,!0);case 20:return e.read()<<8>>8;case 21:return e.readNBytesDV(2).getInt16(0,!0);case 22:return e.readNBytesDV(4).getInt32(0,!0);case 23:return e.readNBytesDV(8).getBigInt64(0,!0);case 32:return e.readNBytesDV(4).getFloat32(0,!0);case 33:return e.readNBytesDV(8).getFloat64(0,!0);case 99:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Array(t);for(let r=0;r<t;r++)n[r]=kt(e);return n}(e)
;case 100:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Object.create(null);for(let r=0;r<t;r++)n[gt(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)))]=kt(e);return n}(e);case 101:return gt(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)));case 102:return e.readNBytes(e.readNBytesDV(4).getUint32(0,!0));default:throw Error("Parse Error: Invalid data ID: "+t)}}function Et(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw Error(`Invalid version=${e}. Expected number [1..40]`)}
function Ct(e,t){return e.toString(2).padStart(t,"0")}function xt(e,t){const n=e%t;return n>=0?n:t+n}function Tt(e,t){return Array(e).fill(t)}function At(...e){let t=0;for(const n of e)t=Math.max(t,n.length);const n=[];for(let r=0;r<t;r++)for(const t of e)r>=t.length||n.push(t[r]);return new Uint8Array(n)}function _t(e,t,n){if(n<0||n+t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function Lt(){let e,t=1/0;return{add(n,r){n>=t||(e=r,t=n)},get:()=>e,
score:()=>t}}function St(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw Error("alphabet.decode: not string element="+t);const n=e.indexOf(t);if(-1===n)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))},encode:t=>{
if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(function(e){if(!Number.isSafeInteger(e))throw Error("Wrong integer: "+e)}(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))}}}function jt(e,t){const{words:n,shortBlocks:r,numBlocks:o,blockLen:i,total:s}=Ds.capacity(e,t),a=(c=n,{encode(e){const t=Rs.divisorPoly(c),n=Array.from(e)
;return n.push(...t.slice(0,-1).fill(0)),Uint8Array.from(Rs.remainderPoly(n,t))},decode(e){const t=e.slice(),n=Rs.polynomial(Array.from(e));let r=Tt(c,0),o=!1;for(let e=0;e<c;e++){const t=Rs.evalPoly(n,Rs.exp(e));r[r.length-1-e]=t,0!==t&&(o=!0)}if(!o)return t;r=Rs.polynomial(r);const i=Rs.monomial(c,1),[s,a]=Rs.euclidian(i,r,c),l=Tt(Rs.degree(s),0);let d=0;for(let e=1;e<256&&d<l.length;e++)0===Rs.evalPoly(s,e)&&(l[d++]=Rs.inv(e));if(d!==l.length)throw Error("RS.decode: wrong errors number")
;for(let e=0;e<l.length;e++){const n=t.length-1-Rs.log(l[e]);if(n<0)throw Error("RS.decode: wrong error location");const r=Rs.inv(l[e]);let o=1;for(let t=0;t<l.length;t++)e!==t&&(o=Rs.mul(o,Rs.add(1,Rs.mul(l[t],r))));t[n]=Rs.add(t[n],Rs.mul(Rs.evalPoly(a,r),Rs.inv(o)))}return t}});var c;return{encode(e){const t=[],n=[];for(let s=0;s<o;s++){const o=i+(s<r?0:1);t.push(e.subarray(0,o)),n.push(a.encode(e.subarray(0,o))),e=e.subarray(o)}const s=At(...t),c=At(...n),l=new Uint8Array(s.length+c.length)
;return l.set(s),l.set(c,s.length),l},decode(e){if(e.length!==s)throw Error(`interleave.decode: len(data)=${e.length}, total=${s}`);const t=[];for(let e=0;e<o;e++){const o=e<r;t.push(new Uint8Array(n+i+(o?0:1)))}let c=0;for(let n=0;n<i;n++)for(let r=0;r<o;r++)t[r][n]=e[c++];for(let n=r;n<o;n++)t[n][i]=e[c++];for(let s=i;s<i+n;s++)for(let n=0;n<o;n++){const o=n<r;t[n][s+(o?0:1)]=e[c++]}const l=[];for(const e of t)l.push(...Array.from(a.decode(e)).slice(0,-n));return Uint8Array.from(l)}}}
function It(e,t,n,r=!1){const o=Ds.size.encode(e);let i=new Ss(o+2);const s=new Ss(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);i=i.embed(0,s).embed({x:-s.width,y:0},s).embed({x:0,y:-s.height},s),i=i.rectSlice(1,o);const a=new Ss(1).rect(0,1,!0).border(1,!1).border(1,!0),c=Ds.alignmentPatterns(e);for(const e of c)for(const t of c)void 0===i.data[e][t]&&i.embed({x:t-2,y:e-2},a);i=i.hLine({x:0,y:6},1/0,(({x:e},t)=>void 0===t?e%2==0:t)).vLine({x:6,y:0
},1/0,(({y:e},t)=>void 0===t?e%2==0:t));{const e=Ds.formatBits(t,n),s=t=>!r&&1==(e>>t&1);for(let e=0;e<6;e++)i.data[e][8]=s(e);for(let e=6;e<8;e++)i.data[e+1][8]=s(e);for(let e=8;e<15;e++)i.data[o-15+e][8]=s(e);for(let e=0;e<8;e++)i.data[8][o-e-1]=s(e);for(let e=8;e<9;e++)i.data[8][15-e-1+1]=s(e);for(let e=9;e<15;e++)i.data[8][15-e-1]=s(e);i.data[o-8][8]=!r}if(e>=7){const t=Ds.versionBits(e);for(let e=0;e<18;e+=1){const n=!r&&1==(t>>e&1),s=Math.floor(e/3),a=e%3+o-8-3;i.data[s][a]=n,
i.data[a][s]=n}}return i}function Ot(e,t,n){const r=e.height,o=Bs[t];let i=-1,s=r-1;for(let t=r-1;t>0;t-=2){for(6==t&&(t=5);;s+=i){for(let r=0;r<2;r+=1){const i=t-r;void 0===e.data[s][i]&&n(i,s,o(i,s))}if(s+i<0||s+i>=r)break}i=-i}}function Mt(e){let t="numeric";for(let n of e)if(!Ds.alphabet.numeric.has(n)&&(t="alphanumeric",!Ds.alphabet.alphanumerc.has(n)))return"byte";return t}function Pt(e,t,n,r){let o="",i=n.length;if("numeric"===r){const e=Ds.alphabet.numeric.decode(n.split("")),t=e.length
;for(let n=0;n<t-2;n+=3)o+=Ct(100*e[n]+10*e[n+1]+e[n+2],10);t%3==1?o+=Ct(e[t-1],4):t%3==2&&(o+=Ct(10*e[t-2]+e[t-1],7))}else if("alphanumeric"===r){const e=Ds.alphabet.alphanumerc.decode(n.split("")),t=e.length;for(let n=0;n<t-1;n+=2)o+=Ct(45*e[n]+e[n+1],11);t%2==1&&(o+=Ct(e[t-1],6))}else{if("byte"!==r)throw Error("encode: unsupported type");{const e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(n)
;i=e.length,o=Array.from(e).map((e=>Ct(e,8))).join("")}}const{capacity:s}=Ds.capacity(e,t),a=Ct(i,Ds.lengthBits(e,r));let c=Ds.modeBits[r]+a+o;if(c.length>s)throw Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,s-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let e=0;c.length!==s;e++)c+=l[e%16];const d=Uint8Array.from(c.match(/(.{8})/g).map((e=>Number("0b"+e))));return jt(e,t).encode(d)}function Dt(e,t,n,r,o=!1){const i=It(e,t,r,o);let s=0
;const a=8*n.length;if(Ot(i,r,((e,t,r)=>{let o=!1;s<a&&(o=!!(n[s>>>3]>>(7-s&7)&1),s++),i.data[t][e]=o!==r})),s!==a)throw Error("QR: bytes left after draw");return i}function Bt(e){const t=e.inverse(),n=e=>{let t=0;for(let n,r=0,o=1;r<e.length;r++)n===e[r]&&(o++,r!==e.length-1)||(o>=5&&(t+=o-5+3),n=e[r],o=1);return t};let r=0;e.data.forEach((e=>r+=n(e))),t.data.forEach((e=>r+=n(e)));let o=0,i=e.data;const s=e.width-1,a=e.height-1;for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=e+1,r=t+1
;i[e][t]===i[n][t]&&i[n][t]===i[e][r]&&i[n][t]===i[n][r]&&(o+=3)}const c=e=>{const t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[...t,...n],o=[...n,...t];let i=0;for(let t=0;t<e.length;t++)_t(e,r,t)&&(i+=40),_t(e,o,t)&&(i+=40);return i};let l=0;for(const t of e.data)l+=c(t);for(const e of t.data)l+=c(e);let d=0;e.rectRead(0,1/0,((e,t)=>d+=t?1:0));const u=d/(e.height*e.width)*100;return r+o+l+10*Math.floor(Math.abs(u-50)/5)}function Rt(e,t="raw",n={}){const r=void 0!==n.ecc?n.ecc:"medium"
;!function(e){if(!js.includes(e))throw Error(`Invalid error correction mode=${e}. Expected: ${js}`)}(r);const o=void 0!==n.encoding?n.encoding:Mt(e);!function(e){if(!Is.includes(e))throw Error(`Encoding: invalid mode=${e}. Expected: ${Is}`);if("kanji"===e||"eci"===e)throw Error(`Encoding: ${e} is not supported (yet?).`)}(o),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!Bs[e])throw Error(`Invalid mask=${e}. Expected number [0..7]`)}(n.mask)
;let i,s=n.version,a=Error("Unknown error");if(void 0!==s)Et(s),i=Pt(s,r,e,o);else for(let t=1;t<=40;t++)try{i=Pt(t,r,e,o),s=t;break}catch(e){a=e}if(!s||!i)throw a;let c=function(e,t,n,r){if(void 0===r){const o=Lt();for(let r=0;r<Bs.length;r++)o.add(Bt(Dt(e,t,n,r,!0)),r);r=o.get()}if(void 0===r)throw Error("Cannot find mask");return Dt(e,t,n,r)}(s,r,i,n.mask);c.assertDrawn();const l=void 0===n.border?2:n.border;if(!Number.isSafeInteger(l))throw Error("Wrong border type="+typeof l)
;if(c=c.border(l,!1),void 0!==n.scale&&(c=c.scale(n.scale)),"raw"===t)return c.data;if("ascii"===t)return c.toASCII();if("svg"===t)return c.toSVG();if("gif"===t)return c.toGIF();if("term"===t)return c.toTerm();throw Error("Unknown output: "+t)}function Nt(e,t){return Ra(e,{i:2},t&&t.out,t&&t.dictionary)}var Ut={d:(e,t)=>{for(var n in t)Ut.o(t,n)&&!Ut.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}};Ut.g=function(){if("object"==typeof globalThis)return globalThis;try{
return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Ut.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ut.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var Ft={};Ut.r(Ft),Ut.d(Ft,{Decoder:()=>Bn,Encoder:()=>Dn,PacketType:()=>Pn,protocol:()=>Mn});const zt=Object.create(null);zt.open="0",zt.close="1",zt.ping="2",zt.pong="3",
zt.message="4",zt.upgrade="5",zt.noop="6";const Ht=Object.create(null);Object.keys(zt).forEach((e=>{Ht[zt[e]]=e}));const qt={type:"error",data:"parser error"
},Vt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Wt="function"==typeof ArrayBuffer,Gt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Jt=({type:e,data:t},n,r)=>Vt&&t instanceof Blob?n?r(t):Xt(t,r):Wt&&(t instanceof ArrayBuffer||Gt(t))?n?r(t):Xt(new Blob([t]),r):r(zt[e]+(t||"")),Xt=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1]
;t("b"+(e||""))},n.readAsDataURL(e)};let Zt;const Kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)$t[Kt.charCodeAt(e)]=e;const Yt="function"==typeof ArrayBuffer,Qt=(e,t)=>{if("string"!=typeof e)return{type:"message",data:tn(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:en(e.substring(1),t)}:Ht[n]?e.length>1?{type:Ht[n],data:e.substring(1)}:{type:Ht[n]}:qt},en=(e,t)=>{if(Yt){
const n=(e=>{let t,n,r,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const l=new ArrayBuffer(s),d=new Uint8Array(l);for(t=0;t<a;t+=4)n=$t[e.charCodeAt(t)],r=$t[e.charCodeAt(t+1)],o=$t[e.charCodeAt(t+2)],i=$t[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return l})(e);return tn(n,t)}return{base64:!0,data:e}},tn=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;let nn
;o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this
;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this
},o.prototype.emitReserved=o.prototype.emit,o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length};const rn="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),on="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),sn=on.setTimeout,an=on.clearTimeout;class cn extends Error{
constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class ln extends o{constructor(e){super(),this.writable=!1,s(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new cn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){
"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Qt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){
return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class dn extends ln{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{
this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){const o=Qt(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{
if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=Array(n);let o=0;e.forEach(((e,i)=>{Jt(e,!1,(e=>{
r[i]=e,++o===n&&t(r.join("\x1e"))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let un=!1;try{un="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Ba){}const hn=un;class pn extends dn{constructor(e){if(super(e),
"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class fn extends o{
constructor(e,t,n){super(),this.createRequest=e,s(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=i(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0)
;for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),
n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=fn.requestsCount++,fn.requests[this._index]=this)}_onError(e){
this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=c,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete fn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fn.requestsCount=0,fn.requests={},
"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",l):"function"==typeof addEventListener&&addEventListener("onpagehide"in on?"pagehide":"unload",l,!1));const mn=function(){const e=d({xdomain:!1});return e&&null!==e.responseType}(),gn="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class bn extends ln{get name(){return"websocket"}doOpen(){
const e=this.uri(),t=this.opts.protocols,n=gn?{}:i(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{
this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Jt(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&rn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){
void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const yn=on.WebSocket||on.MozWebSocket,vn={websocket:class extends bn{createSocket(e,t,n){return gn?new yn(e,t,n):t?new yn(e,t):new yn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends ln{get name(){return"webtransport"}doOpen(){try{
this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const o=function(e,t){nn||(nn=new TextDecoder);const o=[];let i=0,s=-1,a=!1;return new TransformStream({transform(c,l){for(o.push(c);;){if(0===i){if(n(o)<1)break
;const e=r(o,1);a=!(128&~e[0]),s=127&e[0],i=s<126?3:126===s?1:2}else if(1===i){if(n(o)<2)break;const e=r(o,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(n(o)<8)break;const e=r(o,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2097151){l.enqueue(qt);break}s=4294967296*a+t.getUint32(4),i=3}else{if(n(o)<s)break;const e=r(o,s);l.enqueue(Qt(a?e:nn.decode(e),t)),i=0}if(0===s||s>e){l.enqueue(qt);break}}}})
}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(o).getReader(),s=t();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const a=()=>{i.read().then((({done:e,value:t})=>{e||(this.onPacket(t),a())})).catch((()=>{}))};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1
;this._writer.write(n).then((()=>{r&&rn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends pn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=mn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fn(d,this.uri(),e)}}
},wn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],En="function"==typeof addEventListener&&"function"==typeof removeEventListener,Cn=[]
;En&&addEventListener("offline",(()=>{Cn.forEach((e=>e()))}),!1);class xn extends o{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=u(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=u(t.host).host);s(this,t),
this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),
this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=")
;t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),En&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cn.push(this._offlineEventListener))),
this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0)
;const e=this.opts.rememberUpgrade&&xn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){
this.readyState="open",xn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":
const t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer)
;const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){
const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n
}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,rn((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,
t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)}
;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(xn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){
if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),En&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Cn.indexOf(this._offlineEventListener);-1!==e&&Cn.splice(e,1)}this.readyState="closed",this.id=null,
this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}xn.protocol=4;class Tn extends xn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){function t(){s||(s=!0,l(),i.close(),i=null)}function n(){c("transport closed")}function r(){c("socket closed")}function o(e){i&&e.name!==i.name&&t()}let i=this.createTransport(e),s=!1
;xn.priorWebsocketSuccess=!1;const a=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",(e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;xn.priorWebsocketSuccess="websocket"===i.name,this.transport.pause((()=>{s||"closed"!==this.readyState&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())}))}else{const e=Error("probe error");e.transport=i.name,
this.emitReserved("upgradeError",e)}})))},c=e=>{const n=Error("probe error: "+e);n.transport=i.name,t(),this.emitReserved("upgradeError",n)},l=()=>{i.removeListener("open",a),i.removeListener("error",c),i.removeListener("close",n),this.off("close",r),this.off("upgrading",o)};i.once("open",a),i.once("error",c),i.once("close",n),this.once("close",r),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{s||i.open()}),200):i.open()}
onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class An extends Tn{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>vn[e])).filter((e=>!!e))),super(e,n)}}
const _n="function"==typeof ArrayBuffer,Ln=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Sn=Object.prototype.toString,jn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Sn.call(Blob),In="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Sn.call(File),On=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Mn=5;var Pn;!function(e){
e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Pn||(Pn={}));class Dn{constructor(e){this.replacer=e}encode(e){return e.type!==Pn.EVENT&&e.type!==Pn.ACK||!p(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Pn.EVENT?Pn.BINARY_EVENT:Pn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type
;return e.type!==Pn.BINARY_EVENT&&e.type!==Pn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=f(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class Bn extends o{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e)
;const n=t.type===Pn.BINARY_EVENT;n||t.type===Pn.BINARY_ACK?(t.type=n?Pn.EVENT:Pn.ACK,this.reconstructor=new Rn(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!h(e)&&!e.base64)throw Error("Unknown type: "+e);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={
type:Number(e.charAt(0))};if(void 0===Pn[n.type])throw Error("unknown packet type "+n.type);if(n.type===Pn.BINARY_EVENT||n.type===Pn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1
;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Bn.isPayloadValid(n.type,r))throw Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case Pn.CONNECT:return y(t);case Pn.DISCONNECT:return void 0===t;case Pn.CONNECT_ERROR:return"string"==typeof t||y(t);case Pn.EVENT:
case Pn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===On.indexOf(t[0]));case Pn.ACK:case Pn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Rn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=g(this.reconPack,this.buffers)
;return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Nn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Un extends o{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),
this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[v(e,"open",this.onopen.bind(this)),v(e,"packet",this.onpacket.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){
return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(Nn.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:Pn.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}
const s=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,a=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!s||(a?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t)
;const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))}),r),i=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise(((n,r)=>{const o=(e,t)=>e?r(e):n(t);o.withError=!0,t.push(o),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={
id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,
this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Pn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){
Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>t.id+""===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Pn.CONNECT:
e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pn.EVENT:case Pn.BINARY_EVENT:this.onevent(e);break;case Pn.ACK:case Pn.BINARY_ACK:this.onack(e);break;case Pn.DISCONNECT:this.ondisconnect();break;case Pn.CONNECT_ERROR:this.destroy()
;const t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1
;return function(...r){n||(n=!0,t.packet({type:Pn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{
this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Pn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}
timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){
return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){
return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}w.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},w.prototype.reset=function(){this.attempts=0},
w.prototype.setMin=function(e){this.ms=e},w.prototype.setMax=function(e){this.max=e},w.prototype.setJitter=function(e){this.jitter=e};class Fn extends o{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,s(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),
this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new w({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Ft;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){
return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,
null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new An(this.uri,this.opts)
;const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=v(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=v(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}
connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(v(e,"ping",this.onping.bind(this)),v(e,"data",this.ondata.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this)),v(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){rn((()=>{this.emitReserved("packet",e)
}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Un(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,
this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),
this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),
this.emitReserved("reconnect",e)}}const zn={};Object.assign(k,{Manager:Fn,Socket:Un,io:k,connect:k});const Hn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t
},qn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_()
;const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,s=i?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=o>>2,d=(3&o)<<4|s>>4;let u=(15&s)<<2|c>>6,h=63&c;a||(h=64,i||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Hn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++]
;if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_()
;const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const o=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==o||null==i||null==s||null==a)throw new Vn;const c=o<<2|i>>4;if(r.push(c),64!==s){const e=i<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},
this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}
;class Vn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wn=function(e){return function(e){const t=Hn(e);return qn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Gn=function(e){try{return qn.decodeString(e,!0)}catch(e){}return null},Jn=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Ut.g)return Ut.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Xn=()=>{try{
return Jn()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Gn(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Zn=()=>{var e;return null===(e=Xn())||void 0===e?void 0:e.config};class Kn{constructor(){this.reject=()=>{},this.resolve=()=>{},
this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class $n extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yn.prototype.create)}}class Yn{constructor(e,t,n){this.service=e,this.serviceName=t,
this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(Qn,((e,n)=>{const r=t[n];return null!=r?r+"":`<${n}?>`}))}(o,n):"Error",s=`${this.serviceName}: ${i} (${r}).`;return new $n(r,s,n)}}const Qn=/\{\$([^}]+)}/g,er=1e3,tr=2,nr=144e5,rr=.5;class or{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}
setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ir="[DEFAULT]";class sr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e)
;if(!this.instancesDeferred.has(t)){const e=new Kn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null
;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{
this.getOrInitializeService({instanceIdentifier:ir})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values())
;await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`)
;if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{
o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===ir?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{
this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ar{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`)
;t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cr=[];var lr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lr||(lr={}))
;const dr={debug:lr.DEBUG,verbose:lr.VERBOSE,info:lr.INFO,warn:lr.WARN,error:lr.ERROR,silent:lr.SILENT},ur=lr.INFO,hr={[lr.DEBUG]:"log",[lr.VERBOSE]:"log",[lr.INFO]:"info",[lr.WARN]:"warn",[lr.ERROR]:"error"},pr=(e,t)=>{if(!(t<e.logLevel||((new Date).toISOString(),hr[t])))throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fr{constructor(e){this.name=e,this._logLevel=ur,this._logHandler=pr,this._userLogHandler=null,cr.push(this)}get logLevel(){
return this._logLevel}set logLevel(e){if(!(e in lr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?dr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){
this._userLogHandler&&this._userLogHandler(this,lr.DEBUG,...e),this._logHandler(this,lr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lr.VERBOSE,...e),this._logHandler(this,lr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lr.INFO,...e),this._logHandler(this,lr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lr.WARN,...e),this._logHandler(this,lr.WARN,...e)}error(...e){
this._userLogHandler&&this._userLogHandler(this,lr.ERROR,...e),this._logHandler(this,lr.ERROR,...e)}}const mr=(e,t)=>t.some((t=>e instanceof t));let gr,br;const yr=new WeakMap,vr=new WeakMap,wr=new WeakMap,kr=new WeakMap,Er=new WeakMap;let Cr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return j(e[t])},
set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const xr=e=>Er.get(e),Tr=["get","getKey","getAll","getAllKeys","count"],Ar=["put","add","delete","clear"],_r=new Map;var Lr;Lr=Cr,Cr={...Lr,get:(e,t,n)=>O(e,t)||Lr.get(e,t,n),has:(e,t)=>!!O(e,t)||Lr.has(e,t)};class Sr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent()
;return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}
const jr="@firebase/app",Ir="0.10.13",Or=new fr("@firebase/app"),Mr="@firebase/app-compat",Pr="@firebase/analytics-compat",Dr="@firebase/analytics",Br="@firebase/app-check-compat",Rr="@firebase/app-check",Nr="@firebase/auth",Ur="@firebase/auth-compat",Fr="@firebase/database",zr="@firebase/data-connect",Hr="@firebase/database-compat",qr="@firebase/functions",Vr="@firebase/functions-compat",Wr="@firebase/installations",Gr="@firebase/installations-compat",Jr="@firebase/messaging",Xr="@firebase/messaging-compat",Zr="@firebase/performance",Kr="@firebase/performance-compat",$r="@firebase/remote-config",Yr="@firebase/remote-config-compat",Qr="@firebase/storage",eo="@firebase/storage-compat",to="@firebase/firestore",no="@firebase/vertexai-preview",ro="@firebase/firestore-compat",oo="firebase",io="[DEFAULT]",so={
[jr]:"fire-core",[Mr]:"fire-core-compat",[Dr]:"fire-analytics",[Pr]:"fire-analytics-compat",[Rr]:"fire-app-check",[Br]:"fire-app-check-compat",[Nr]:"fire-auth",[Ur]:"fire-auth-compat",[Fr]:"fire-rtdb",[zr]:"fire-data-connect",[Hr]:"fire-rtdb-compat",[qr]:"fire-fn",[Vr]:"fire-fn-compat",[Wr]:"fire-iid",[Gr]:"fire-iid-compat",[Jr]:"fire-fcm",[Xr]:"fire-fcm-compat",[Zr]:"fire-perf",[Kr]:"fire-perf-compat",[$r]:"fire-rc",[Yr]:"fire-rc-compat",[Qr]:"fire-gcs",[eo]:"fire-gcs-compat",[to]:"fire-fst",
[ro]:"fire-fst-compat",[no]:"fire-vertex","fire-js":"fire-js",[oo]:"fire-js-all"},ao=new Map,co=new Map,lo=new Map,uo=new Yn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted",
"no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
"idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ho{constructor(e,t,n){this._isDeleted=!1,
this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new or("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}
get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}const po="firebase-heartbeat-database",fo=1,mo="firebase-heartbeat-store";let go=null;class bo{constructor(e){this.container=e,this._heartbeatsCache=null
;const t=this.container.getProvider("app").getImmediate();this._storage=new yo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=z();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,
null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){
var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=z(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),H(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),H(n)>t){n.pop();break}r=r.slice(1)}
return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=Wn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Or.warn(e),""}}}class yo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}
async runIndexedDBEnvironmentCheck(){return!!E()&&C().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await N()).transaction(mo),n=await t.objectStore(mo).get(F(e));return await t.done,n}catch(e){if(e instanceof $n)Or.warn(e.message);else{const t=uo.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Or.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{
heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return U(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return U(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}var vo
;vo="",P(new or("platform-logger",(e=>new Sr(e)),"PRIVATE")),P(new or("heartbeat",(e=>new bo(e)),"PRIVATE")),R(jr,Ir,vo),R(jr,Ir,"esm2017"),R("fire-js",""),R("firebase","10.14.1","app");const wo="@firebase/installations",ko="0.6.9",Eo=1e4,Co="w:"+ko,xo="FIS_v2",To="https://firebaseinstallations.googleapis.com/v1",Ao=36e5,_o=new Yn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',
"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."}),Lo=/^[cdef][\w-]{21}$/,So="",jo=new Map;let Io=null
;const Oo="firebase-installations-database",Mo=1,Po="firebase-installations-store";let Do=null;const Bo="installations",Ro=e=>{const t=D(e.getProvider("app").getImmediate(),Bo).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ae(t);return r?r.catch(console.error):he(t).catch(console.error),n.fid}(t),getToken:e=>me(t,e)}};P(new or(Bo,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){
if(!e||!e.options)throw ge("App Configuration");if(!e.name)throw ge("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ge(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:D(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),P(new or("installations-internal",Ro,"PRIVATE")),R(wo,ko),R(wo,ko,"esm2017")
;const No="analytics",Uo="firebase_id",Fo="origin",zo=6e4,Ho="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qo="https://www.googletagmanager.com/gtag/js",Vo=new fr("@firebase/analytics"),Wo=new Yn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",
"already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",
"interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",
"no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),Go=30,Jo=new class{constructor(e={},t=1e3){this.throttleMetadata=e,
this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};class Xo{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Zo,Ko;class $o{constructor(e){this.app=e}_delete(){return delete Yo[this.app.options.appId],Promise.resolve()}}let Yo={},Qo=[];const ei={};let ti,ni,ri="dataLayer",oi="gtag",ii=!1
;const si="@firebase/analytics",ai="0.10.8";P(new or(No,((e,{options:t})=>Le(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),P(new or("analytics-internal",(function(e){try{const t=e.getProvider(No).getImmediate();return{logEvent:(e,n,r)=>je(t,e,n,r)}}catch(e){throw Wo.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),R(si,ai),R(si,ai,"esm2017")
;const ci=1,li=1,di="emoji",ui="keyvalue",hi="favorites",pi="tokens",fi="tokens",mi="unicode",gi="count",bi="group",yi="order",vi="group-order",wi="eTag",ki="url",Ei="skinTone",Ci="readonly",xi="readwrite",Ti="skinUnicodes",Ai="skinUnicodes",_i={},Li={},Si={},ji=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),Ii=2,Oi="",Mi=["name","url"],Pi="undefined"!=typeof wrappedJSObject,Di=["annotation","emoji","group","order","version"]
;class Bi{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=Ze(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,Li[t]||(Li[t]=De(t)),Li[t]);var t;!function(e,t){let n=Si[e];n||(n=Si[e]=[]),n.push(t)
}(this._dbName,this._clear);const n=this.dataSource,r=await async function(e){return!await Xe(e,ui,ki)}(e);r?await async function(e,t){let[n,r]=await Ye(t);n||(n=await Qe(r)),await We(e,r,t,n)}(e,n):this._lazyUpdate=et(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return Oe(e),await this.ready(),Me(await async function(e,t){return Be(e,di,Ci,((e,n,r)=>{const o=IDBKeyRange.bound([t,0],[t+1,0],!1,!0)
;He(e.index(vi),o,r)}))}(this._db,e)).map(Ke)}async getEmojiBySearchQuery(e){return Ie(e),await this.ready(),[...this._custom.search(e),...Me(await Ge(this._db,e)).map(Ke)]}async getEmojiByShortcode(e){Ie(e),await this.ready();const t=this._custom.byShortcode(e);return t||Ke(await Je(this._db,e))}async getEmojiByUnicodeOrName(e){Ie(e),await this.ready();const t=this._custom.byName(e);return t||Ke(await async function(e,t){return Be(e,di,Ci,((e,n,r)=>ze(e,t,(n=>{if(n)return r(n)
;ze(e.index(Ti),t,(e=>r(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await Xe(this._db,ui,Ei)||0}async setPreferredSkinTone(e){return Oe(e),await this.ready(),function(e,t,n,r){return Be(e,t,xi,((e,t)=>{e.put(r,n),qe(t)}))}(this._db,ui,Ei,e)}async incrementFavoriteEmojiCount(e){return Ie(e),await this.ready(),t=this._db,n=e,Be(t,hi,xi,((e,t)=>ze(e,n,(r=>{e.put((r||0)+1,n),qe(t)}))));var t,n}async getTopFavoriteEmoji(e){return Oe(e),await this.ready(),
(await function(e,t,n){return 0===n?[]:Be(e,[hi,di],Ci,(([e,r],o,i)=>{const s=[];e.index(gi).openCursor(void 0,"prev").onsuccess=e=>{function o(e){if(s.push(e),s.length===n)return i(s);a.continue()}const a=e.target.result;if(!a)return i(s);const c=a.primaryKey,l=t.byName(c);if(l)return o(l);ze(r,c,(e=>{if(e)return o(e);a.continue()}))}}))}(this._db,this._custom,e)).map(Ke)}set customEmoji(e){this._custom=Ze(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{
await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Re(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{Re(e),Pe(t,n,indexedDB.deleteDatabase(e))})))}}
const Ri=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),Ni=Ri.slice(1),Ui="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout,Fi={"\u{1fae8}":15.1,"\u{1fae0}":14,"\u{1f972}":13.1,
"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6
},zi=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],Hi='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',qi=(e,t)=>e<t?-1:e>t?1:0,Vi=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0})
;return r.textBaseline="top",r.font="100px "+Hi,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},Wi=(e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")};let Gi;const Ji=()=>(Gi||(Gi=new Promise((e=>Ui((()=>e(function(){const e=Object.entries(Fi);try{for(const[t,n]of e)if(nt(t))return n}catch(e){}return e[0][1]}())))))),Gi),Xi=new Map,Zi="\ufe0f",Ki="\ud83c",$i="\u200d",Yi=127995,Qi=57339,es=requestAnimationFrame
;let ts,ns="function"==typeof ResizeObserver;const rs=new WeakMap,os=new WeakMap,is=Symbol("un-keyed"),ss="replaceChildren"in Element.prototype,as="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e),cs=new WeakMap,ls=[],{assign:ds}=Object;var us={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",
searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons",
"people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const hs=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],ps=`:host{--emoji-font-family:${Hi}}`;class fs extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style")
;t.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+ps,
this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:qi,customEmoji:null,i18n:us,emojiVersion:null,...e};for(const e of hs)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=mt(this.shadowRoot,this._ctx))}disconnectedCallback(){as((()=>{
if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((()=>{}))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){
const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new Bi({locale:e,dataSource:t}))}_dbFlush(){as((()=>this._dbCreate()))}}const ms={};for(const e of hs)ms[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(fs.prototype,ms),customElements.get("emoji-picker")||customElements.define("emoji-picker",fs)
;var gs,bs,ys=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},vs=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};gs=new WeakMap,bs=new WeakMap;const ws=class{constructor(e,t){gs.set(this,void 0),bs.set(this,void 0),ys(this,gs,ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),"f"),ys(this,bs,t||0,"f")}read(){var e,t;return vs(this,gs,"f")[(ys(this,bs,(t=vs(this,bs,"f"),e=t++,
t),"f"),e)]}readNBytes(e){return vs(this,gs,"f").subarray(vs(this,bs,"f"),ys(this,bs,vs(this,bs,"f")+e,"f"))}readNBytesDV(e){const t=vs(this,gs,"f").subarray(vs(this,bs,"f"),ys(this,bs,vs(this,bs,"f")+e,"f"));return new DataView(t.buffer,t.byteOffset,t.byteLength)}};var ks,Es,Cs=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},xs=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};ks=new WeakMap,Es=new WeakMap;const Ts=class{constructor(){ks.set(this,[]),Es.set(this,0)}write(e){if("number"==typeof e)Cs(this,ks,"f").push(e),xs(this,Es,Cs(this,Es,"f")+1,"f");else if(Array.isArray(e)){const t=Uint8Array.from(e);Cs(this,ks,"f").push(t),xs(this,Es,Cs(this,Es,"f")+t.byteLength,"f")
}else if(ArrayBuffer.isView(e)){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Cs(this,ks,"f").push(t),xs(this,Es,Cs(this,Es,"f")+t.byteLength,"f")}else{const t=new Uint8Array(e);Cs(this,ks,"f").push(t),xs(this,Es,Cs(this,Es,"f")+t.byteLength,"f")}}toBuffer(){const e=new Uint8Array(Cs(this,Es,"f"));let t=0;for(const n of Cs(this,ks,"f"))"number"!=typeof n?(e.set(n,t),t+=n.byteLength):e[t++]=n;return e}},As=Object.freeze(Object.create(null,{encode:{value:function(e){
if("object"!=typeof e||null==e)throw Error("Data must be a non-null object or array.");const t=new Ts;return t.write(Uint8Array.of(128,99,98,106,102,2)),wt(t,e),t.toBuffer().buffer},writable:!1,enumerable:!1,configurable:!1},decode:{value:function(e){if(Array.isArray(e)||"function"==typeof e[Symbol.iterator])e=Uint8Array.from(e);else if(bt(e))e=new Uint8Array(e);else{if(!ArrayBuffer.isView(e))throw Error("Data must be a Uint8Array or ArrayBuffer object.")
;e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(128!==e[0]||99!==e[1]||98!==e[2]||106!==e[3]||102!==e[4]||2!==e[5])throw Error("Parse Error: Invalid magic value");return kt(new ws(e,6))},writable:!1,enumerable:!1,configurable:!1},[Symbol.toStringTag]:{value:"NettleDB",writable:!1,enumerable:!1,configurable:!1}
})),_s="object"==typeof globalThis&&null!=globalThis?globalThis:"object"==typeof window&&null!=window?window:"object"==typeof global&&null!=global?global:"object"==typeof self&&null!=self?self:Function("return this;")();"object"==typeof _s&&null!=_s&&Object.defineProperty(_s,"NettleDB",{value:As,writable:!1,enumerable:!1,configurable:!1});const Ls=As;class Ss{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),
!Number.isSafeInteger(e.height)&&e.height!==1/0)throw Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){const t=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),n=t.length,r=Array(n);let o;for(const e of t){const t=e.split("").map((e=>{
if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw Error("Bitmap.fromString: unknown symbol="+e)}));if(o&&t.length!==o)throw Error(`Bitmap.fromString different row sizes: width=${o} cur=${t.length}`);o=t.length,r.push(t)}return o||(o=0),new Ss({height:n,width:o},r)}constructor(e,t){const{height:n,width:r}=Ss.size(e);this.data=t||Array.from({length:n},(()=>Tt(r,void 0))),this.height=n,this.width=r}point(e){return this.data[e.y][e.x]}isInside(e){
return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw Error("Bitmap: wrong x="+e.x);if(!Number.isSafeInteger(e.y))throw Error("Bitmap: wrong y="+e.y);return e.x=xt(e.x,this.width),e.y=xt(e.y,this.height),e}rect(e,t,n){const{x:r,y:o}=this.xy(e),{height:i,width:s}=Ss.size(t,this.size({x:r,y:o
}));for(let e=0;e<i;e++)for(let t=0;t<s;t++)this.data[o+e][r+t]="function"==typeof n?n({x:t,y:e},this.data[o+e][r+t]):n;return this}rectRead(e,t,n){return this.rect(e,t,((e,t)=>(n(e,t),t)))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){const n=this.height+2*e,r=this.width+2*e,o=Tt(e,t),i=Array.from({length:e},(()=>Tt(r,t)));return new Ss({height:n,width:r},[...i,...this.data.map((e=>[...o,...e,...o])),...i])}embed(e,t){
return this.rect(e,t.size(),(({x:e,y:n})=>t.data[n][e]))}rectSlice(e,t=this.size()){const n=new Ss(Ss.size(t,this.size(this.xy(e))));return this.rect(e,t,(({x:e,y:t},r)=>n.data[t][e]=r)),n}inverse(){const{height:e,width:t}=this;return new Ss({height:t,width:e}).rect({x:0,y:0},1/0,(({x:e,y:t})=>this.data[e][t]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw Error("Wrong scale factor: "+e);const{height:t,width:n}=this;return new Ss({height:e*t,width:e*n}).rect({x:0,y:0
},1/0,(({x:t,y:n})=>this.data[Math.floor(n/e)][Math.floor(t/e)]))}clone(){return new Ss(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:t})=>this.data[t][e]))}assertDrawn(){this.rectRead(0,1/0,((e,t)=>{if("boolean"!=typeof t)throw Error("Invalid color type="+typeof t)}))}toString(){return this.data.map((e=>e.map((e=>void 0===e?"?":e?"X":" ")).join(""))).join("\n")}toASCII(){const{height:e,width:t,data:n}=this;let r="";for(let o=0;o<e;o+=2){for(let i=0;i<t;i++){
const t=n[o][i],s=o+1>=e||n[o+1][i];t||s?!t&&s?r+="\u2580":t&&!s?r+="\u2584":t&&s&&(r+=" "):r+="\u2588"}r+="\n"}return r}toTerm(){const e="\x1b[0m",t="\x1b[1;47m  "+e,n="\x1b[40m  "+e;return this.data.map((e=>e.map((e=>e?n:t)).join(""))).join("\n")}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(({x:t,y:n},r)=>{
r&&(e+=`<rect x="${t}" y="${n}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,((e,t)=>n.push(+(!0===t))));const r=126,o=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...Tt(381,0),44,0,0,0,0,...t,0,7],i=Math.floor(n.length/r);for(let e=0;e<i;e++)o.push(127,128,...n.slice(r*e,r*(e+1)).map((e=>+e)));return o.push(n.length%r+1,128,...n.slice(i*r).map((e=>+e))),o.push(1,129,0,59),new Uint8Array(o)}
toImage(e=!1){const{height:t,width:n}=this.size(),r=new Uint8Array(t*n*(e?3:4));let o=0;for(let i=0;i<t;i++)for(let t=0;t<n;t++){const n=this.data[i][t]?0:255;r[o++]=n,r[o++]=n,r[o++]=n,e||(r[o++]=255)}return{height:t,width:n,data:r}}}
const js=["low","medium","quartile","high"],Is=["numeric","alphanumeric","byte","kanji","eci"],Os=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],Ms={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],
medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},Ps={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],
medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},Ds={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[]
;const t=Ds.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28);let o=Math.floor(n/r);o%2?o+=1:n%r*2>=r&&(o+=2);const i=[6];for(let e=1;e<r;e++)i.push(t-(r-e)*o);return i.push(t),i},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){const n=Ds.ECCode[e]<<3|t;let r=n;for(let e=0;e<10;e++)r=r<<1^1335*(r>>9);return(n<<10|r)^Ds.formatMask},versionBits(e){let t=e;for(let e=0;e<12;e++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:St("0123456789"),
alphanumerc:St("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][Ds.sizeType(e)]),modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){const n=Os[e-1],r=Ms[t][e-1],o=Ps[t][e-1],i=Math.floor(n/o)-r,s=o-n%o;return{words:r,numBlocks:o,shortBlocks:s,blockLen:i,capacity:8*(n-r*o),total:(r+i)*o+o-s}}
},Bs=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,e=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],Rs={tables:(()=>{const e=Tt(256,0),t=Tt(256,0);for(let n=0,r=1;n<256;n++)e[n]=r,t[r]=n,r<<=1,256&r&&(r^=285);return{exp:e,log:t}})(),exp:e=>Rs.tables.exp[e],log(e){if(0===e)throw Error("GF.log: wrong arg="+e);return Rs.tables.log[e]%255},
mul:(e,t)=>0===e||0===t?0:Rs.tables.exp[(Rs.tables.log[e]+Rs.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>Rs.tables.exp[Rs.tables.log[e]*t%255],inv(e){if(0===e)throw Error("GF.inverse: wrong arg="+e);return Rs.tables.exp[255-Rs.tables.log[e]]},polynomial(e){if(0==e.length)throw Error("GF.polymomial: wrong length");if(0!==e[0])return e;let t=0;for(;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw Error("GF.monomial: wrong degree="+e);if(0==t)return[0];let n=Tt(e+1,0)
;return n[0]=t,Rs.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[Rs.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];const n=Tt(e.length+t.length-1,0);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]=Rs.add(n[r+o],Rs.mul(e[r],t[o]));return Rs.polynomial(n)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;const n=Tt(e.length,0);for(let r=0;r<e.length;r++)n[r]=Rs.mul(e[r],t);return Rs.polynomial(n)},mulPolyMonomial(e,t,n){
if(t<0)throw Error("GF.mulPolyMonomial: wrong degree");if(0==n)return[0];const r=Tt(e.length+t,0);for(let t=0;t<e.length;t++)r[t]=Rs.mul(e[t],n);return Rs.polynomial(r)},addPoly(e,t){if(0===e[0])return t;if(0===t[0])return e;let n=e,r=t;n.length>r.length&&([n,r]=[r,n]);let o=Tt(r.length,0),i=r.length-n.length,s=r.slice(0,i);for(let e=0;e<s.length;e++)o[e]=s[e];for(let e=i;e<r.length;e++)o[e]=Rs.add(n[e-i],r[e]);return Rs.polynomial(o)},remainderPoly(e,t){const n=Array.from(e)
;for(let r=0;r<e.length-t.length+1;r++){const e=n[r];if(0!==e)for(let o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=Rs.add(n[r+o],Rs.mul(t[o],e)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){let t=[1];for(let n=0;n<e;n++)t=Rs.mulPoly(t,[1,Rs.pow(2,n)]);return t},evalPoly(e,t){if(0==t)return Rs.coefficient(e,0);let n=e[0];for(let r=1;r<e.length;r++)n=Rs.add(Rs.mul(t,n),e[r]);return n},euclidian(e,t,n){Rs.degree(e)<Rs.degree(t)&&([e,t]=[t,e]);let r=e,o=t,i=[0],s=[1]
;for(;2*Rs.degree(o)>=n;){let e=r,t=i;if(r=o,i=s,0===r[0])throw Error("rLast[0] === 0");o=e;let n=[0];const a=Rs.inv(r[0]);for(;Rs.degree(o)>=Rs.degree(r)&&0!==o[0];){const e=Rs.degree(o)-Rs.degree(r),t=Rs.mul(o[0],a);n=Rs.addPoly(n,Rs.monomial(e,t)),o=Rs.addPoly(o,Rs.mulPolyMonomial(r,e,t))}if(n=Rs.mulPoly(n,i),s=Rs.addPoly(n,t),Rs.degree(o)>=Rs.degree(r))throw Error(`Division failed r: ${o}, rLast: ${r}`)}const a=Rs.coefficient(s,0);if(0==a)throw Error("sigmaTilde(0) was zero")
;const c=Rs.inv(a);return[Rs.mulPolyScalar(s,c),Rs.mulPolyScalar(o,c)]}},Ns=function(){for(let e=Object.getPrototypeOf(this);null!=e;e=Object.getPrototypeOf(e))try{delete e.constructor}catch(e){}},Us=Object.freeze(Object.create(null));Object.defineProperty(Ns,"prototype",{value:Us,writable:!1,enumerable:!1,configurable:!1}),Object.setPrototypeOf(Ns,null),Object.freeze(Ns);const Fs=Ns;var zs,Hs=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};zs=new WeakMap;const qs=class extends Fs{constructor(){super(...arguments),zs.set(this,Object.create(null))}get size(){return Object.keys(Hs(this,zs,"f")).length}has(e){return e in Hs(this,zs,"f")}get(e){return Hs(this,zs,"f")[e]||null}set(e,t){Hs(this,zs,"f")[e]=t}delete(e){
return delete Hs(this,zs,"f")[e]}clear(){const e=Hs(this,zs,"f");for(const t of Object.keys(e))delete e[t]}keys(){return Object.keys(Hs(this,zs,"f"))}values(){const e=Hs(this,zs,"f"),t=[];for(const n of Object.keys(e))t.push(e[n]);return t}entries(){const e=Hs(this,zs,"f"),t=[];for(const n of Object.keys(e))t.push([n,e[n]]);return t}};var Vs,Ws=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Gs=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};Vs=new WeakMap;const Js=class extends Fs{get size(){return Ws(this,Vs,"f").length}constructor(e){super(),Vs.set(this,void 0),Gs(this,Vs,e,"f")}has(e){return null!=Ws(this,Vs,"f").getItem(e)}get(e){return Ws(this,Vs,"f").getItem(e)}set(e,t){Ws(this,Vs,"f").setItem(e,t)}delete(e){
return Ws(this,Vs,"f").removeItem(e),!0}clear(){Ws(this,Vs,"f").clear()}keys(){const e=Ws(this,Vs,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.key(r);return n}values(){const e=Ws(this,Vs,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.getItem(e.key(r));return n}entries(){const e=Ws(this,Vs,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++){const t=e.key(r);n[r]=[t,e.getItem(t)]}return n}};var Xs,Zs,Ks,$s,Ys=function(e,t,n,r){
if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Qs=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};Xs=new WeakMap,Zs=new WeakMap,Ks=new WeakMap,$s=new WeakMap;const ea=class extends Fs{get message(){return Ys(this,Ks,"f")}get persistent(){return Ys(this,$s,"f")}get localStorage(){return Ys(this,Xs,"f")}get sessionStorage(){return Ys(this,Zs,"f")}constructor(e){super(),Xs.set(this,void 0),
Zs.set(this,void 0),Ks.set(this,void 0),$s.set(this,void 0);try{const{localStorage:t,sessionStorage:n}=e;if(null==t||null==n)throw Error("Required storage interfaces not available.");const r="___whitespider___",o=Date.now().toString(24);if(t.setItem(r,o),t.getItem(r)!==o)throw Error("Local storage test failed: value mismatch");if(n.setItem(r,o),n.getItem(r)!==o)throw Error("Session storage test failed: value mismatch");Qs(this,Xs,new Js(t),"f"),Qs(this,Zs,new Js(n),"f"),Qs(this,Ks,null,"f"),
Qs(this,$s,!0,"f")}catch(e){Qs(this,Xs,new qs,"f"),Qs(this,Zs,new qs,"f"),Qs(this,Ks,e+"","f"),Qs(this,$s,!1,"f")}}},ta="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",na={encode:function(e){let t="",n=0,r=0;for(let o=0;o<e.length;o++)for(n=n<<8|e[o],r+=8;r>=5;)t+=ta[n>>r-5&31],r-=5;for(r>0&&(t+=ta[n<<5-r&31]);t.length%8!=0;)t+="=";return t},decode:function(e){e=e.replace(/=+$/,"");const t=[];let n=0,r=0;for(let o=0;o<e.length;o++){const i=ta.indexOf(e[o].toUpperCase())
;if(i<0)throw Error("Invalid character found in Base32 string.");n=n<<5|i,r+=5,r>=8&&(t.push(n>>r-8&255),r-=8)}return Uint8Array.from(t)}};Object.setPrototypeOf(na,null);const ra=Object.freeze(na),oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ia=new Uint8Array(new ArrayBuffer(256),0,256);for(let e=0;e<64;e++)ia[oa.charCodeAt(e)]=e;const sa={encode:function(e){const t=e.byteLength;let n="",r="";for(let r=0;r<t;r+=3){const t=e[r]<<16|e[r+1]<<8|e[r+2]
;n+=oa[t>>18&63]+oa[t>>12&63]+oa[t>>6&63]+oa[63&t]}const o=t%3;return 1===o?(r="==",n=n.slice(0,-2)):2===o&&(r="=",n=n.slice(0,-1)),n+r},decode:function(e){const t=.75*e.length-(e.endsWith("==")?2:e.endsWith("=")?1:0),n=new Uint8Array(new ArrayBuffer(t),0,t);let r=0;for(let t=0;t<e.length;t+=4){const o=ia[e.charCodeAt(t)]<<18|ia[e.charCodeAt(t+1)]<<12|ia[e.charCodeAt(t+2)]<<6|ia[e.charCodeAt(t+3)];n[r++]=o>>16&255,n[r++]=o>>8&255,n[r++]=255&o}return n}};Object.setPrototypeOf(sa,null)
;const aa=Object.freeze(sa),ca={encode:function(e){const t=[];for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)},decode:function(e){let t=0,n="";for(;t<e.byteLength;){const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1]
;n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}};Object.setPrototypeOf(ca,null);const la=Object.freeze(ca)
;var da=Uint8Array,ua=Uint16Array,ha=Int32Array,pa=new da([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fa=new da([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ma=new da([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ga=function(e,t){for(var n=new ua(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new ha(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return{b:n,r:o}},ba=ga(pa,2),ya=ba.b,va=ba.r;ya[28]=258,va[258]=28
;for(var wa=ga(fa,0),ka=wa.b,Ea=(wa.r,new ua(32768)),Ca=0;Ca<32768;++Ca){var xa=(43690&Ca)>>1|(21845&Ca)<<1;xa=(61680&(xa=(52428&xa)>>2|(13107&xa)<<2))>>4|(3855&xa)<<4,Ea[Ca]=((65280&xa)>>8|(255&xa)<<8)>>1}var Ta=function(e,t,n){for(var r=e.length,o=0,i=new ua(t);o<r;++o)e[o]&&++i[e[o]-1];var s,a=new ua(t);for(o=1;o<t;++o)a[o]=a[o-1]+i[o-1]<<1;if(n){s=new ua(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=a[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)s[Ea[u]>>c]=l
}else for(s=new ua(r),o=0;o<r;++o)e[o]&&(s[o]=Ea[a[e[o]-1]++]>>15-e[o]);return s},Aa=new da(288);for(Ca=0;Ca<144;++Ca)Aa[Ca]=8;for(Ca=144;Ca<256;++Ca)Aa[Ca]=9;for(Ca=256;Ca<280;++Ca)Aa[Ca]=7;for(Ca=280;Ca<288;++Ca)Aa[Ca]=8;var _a=new da(32);for(Ca=0;Ca<32;++Ca)_a[Ca]=5;var La=Ta(Aa,9,1),Sa=Ta(_a,5,1),ja=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ia=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Oa=function(e,t){var n=t/8|0
;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Ma=function(e){return(e+7)/8|0},Pa=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new da(e.subarray(t,n))},Da=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ba=function(e,t,n){var r=Error(t||Da[e])
;if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ba),!n)throw r;return r},Ra=function(e,t,n,r){var o=e.length,i=r?r.length:0;if(!o||t.f&&!t.l)return n||new da(0);var s=!n,a=s||2!=t.i,c=t.i;s&&(n=new da(3*o));var l=function(e){var t=n.length;if(e>t){var r=new da(Math.max(2*t,e));r.set(n),n=r}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,b=8*o;do{if(!p){d=Ia(e,u,1);var y=Ia(e,u+1,3);if(u+=3,!y){var v=e[(j=Ma(u)+4)-4]|e[j-3]<<8,w=j+v;if(w>o){c&&Ba(0);break}a&&l(h+v),
n.set(e.subarray(j,w),h),t.b=h+=v,t.p=u=8*w,t.f=d;continue}if(1==y)p=La,f=Sa,m=9,g=5;else if(2==y){var k=Ia(e,u,31)+257,E=Ia(e,u+10,15)+4,C=k+Ia(e,u+5,31)+1;u+=14;for(var x=new da(C),T=new da(19),A=0;A<E;++A)T[ma[A]]=Ia(e,u+3*A,7);u+=3*E;var _=ja(T),L=(1<<_)-1,S=Ta(T,_,1);for(A=0;A<C;){var j,I=S[Ia(e,u,L)];if(u+=15&I,(j=I>>4)<16)x[A++]=j;else{var O=0,M=0;for(16==j?(M=3+Ia(e,u,3),u+=2,O=x[A-1]):17==j?(M=3+Ia(e,u,7),u+=3):18==j&&(M=11+Ia(e,u,127),u+=7);M--;)x[A++]=O}}
var P=x.subarray(0,k),D=x.subarray(k);m=ja(P),g=ja(D),p=Ta(P,m,1),f=Ta(D,g,1)}else Ba(1);if(u>b){c&&Ba(0);break}}a&&l(h+131072);for(var B=(1<<m)-1,R=(1<<g)-1,N=u;;N=u){var U=(O=p[Oa(e,u)&B])>>4;if((u+=15&O)>b){c&&Ba(0);break}if(O||Ba(2),U<256)n[h++]=U;else{if(256==U){N=u,p=null;break}var F=U-254;if(U>264){var z=pa[A=U-257];F=Ia(e,u,(1<<z)-1)+ya[A],u+=z}var H=f[Oa(e,u)&R],q=H>>4;if(H||Ba(3),u+=15&H,D=ka[q],q>3&&(z=fa[q],D+=Oa(e,u)&(1<<z)-1,u+=z),u>b){c&&Ba(0);break}a&&l(h+131072);var V=h+F
;if(h<D){var W=i-D,G=Math.min(D,V);for(W+h<0&&Ba(3);h<G;++h)n[h]=r[W+h]}for(;h<V;++h)n[h]=n[h-D]}}t.l=p,t.p=N,t.b=h,t.f=d,p&&(d=1,t.m=m,t.d=f,t.n=g)}while(!d);return h!=n.length&&s?Pa(n,0,h):n.subarray(0,h)},Na=new da(0),Ua="undefined"!=typeof TextDecoder&&new TextDecoder;try{Ua.decode(Na,{stream:!0})}catch(e){}"function"==typeof queueMicrotask&&queueMicrotask
;const Fa=Object.freeze(Ls.decode(Nt(aa.decode("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"))))
;let za="whitespider";const{p:Ha,s:qa,y:Va,e:Wa}=Fa.x;Ha&&qa&&Va&&(za=qa+Wa+"bm."+Va+Ha+"/",za.length<10&&(za=""));const Ga=za;let Ja;const Xa=Object.freeze(Object.create(null,{_:{value:({console:e})=>{if(null==e||"object"!=typeof e)throw Error("Invalid interface");const t=Reflect.get(e,"log",void 0);if("function"!=typeof t)throw Error("Invalid instance impl");Ja=(...e)=>(Reflect.apply(t,null,e),!0)},writable:!1,enumerable:!1,configurable:!1},$:{get:()=>Ja,enumerable:!1,configurable:!1}}))
;(async({window:e,document:t})=>{function n(e){const n=t.getElementById(e);if(null==n)throw Error("Element does not exist: "+e);return n}function r(e){const n=t.querySelector(e);if(n instanceof HTMLElement)return n;throw Error("Failed to query selector: "+e)}function o(e){null!=e?(v.textContent=e,v.style.display="block"):v.style.display="none"}function i(e){try{return new URL(e)}catch(e){return null}}function s(e){for(let t=e.length;t>0;t--){const n=Math.floor(Math.random()*(t+1))
;[e[t],e[n]]=[e[n],e[t]]}return e}async function a(t,n){try{const r=await e.fetch(t,{cache:n||"force-cache",method:"GET"});return r.ok?await r.text():null}catch(e){return null}}function c(e){w.appendChild(l(e)),E.style.display="block"}function l(e){const n=t.createElement("iframe");return n.setAttribute("width","1024"),n.setAttribute("height","768"),n.setAttribute("allowfullscreen","true"),n.setAttribute("allowpaymentrequest","true"),n.setAttribute("name","Frame"),
n.setAttribute("loading","lazy"),n.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin allow-pointer-lock"),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("credentialless","true"),n.setAttribute("referrerpolicy","no-referrer"),
n.setAttribute("src","data:application/xhtml+xml;base64,"+aa.encode(la.encode(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\t\t<meta http-equiv="Referrer-Policy" content="no-referrer" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<base href="${origin}" target="_blank" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K" />\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t<embed type="text/plain" width="1024" height="768" src="${e.replace(/\&/g,"&amp;")}" />\n\t</body>\n</html>`))),
n}function d(){W=null,F||(t.title="NettleWeb"),b.replaceState(void 0,"","/"),_.setAttribute("content",""),L.setAttribute("href","https://nettleweb.com/")}function u(t){const n=e.open(void 0,"_blank","");null!=n?(n.stop(),n.focus(),setTimeout((()=>{n.location.replace(t)}),100)):o("Please allow popups in your browser settings and try again.")}function h(t){const n=e.open(void 0,"_blank","");if(null==n)return void o("Please allow popups in your browser settings and try again.");n.focus()
;const r=n.document
;r.head.innerHTML='<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta http-equiv="Referrer-Policy" content="no-referrer"/><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width,initial-scale=1"/><base href="'+e.origin+'" target="_blank" /><link rel="icon" type="image/x-icon" href="res/google.ico" /><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K"/>',
r.body.appendChild(t),r.title="Google"}function p(e,t){return new Promise(((n,r)=>{const o=Date.now().toString(36),i=(e,t,a)=>{e===o&&(R.off("res",i),R.off("disconnect",s),null!=a?r(a):n(t))},s=()=>{R.off("res",i),R.off("disconnect",s),r("Error: Server connection interrupted.")};R.on("res",i),R.on("disconnect",s),R.emit("fetch",o,e,t)}))}var f,m;"complete"!==t.readyState&&await new Promise((e=>{const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),
setTimeout(e,100,null))};t.addEventListener("readystatechange",n,{passive:!0})})),e.focus(),Xa._(e),e.onkeydown=e=>{if(e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey)switch(e.key){case"h":case"q":e.preventDefault(),e.stopPropagation(),g.replace("https://www.google.com/webhp?igu=1");break;case"b":e.preventDefault(),e.stopPropagation(),A.hasAttribute("style")?A.removeAttribute("style"):A.setAttribute("style","filter: blur(15px);")}},e.onpopstate=e=>{e.preventDefault(),e.stopPropagation(),
o("Notice: Please press ctrl+Q to leave this website.")},e.onappinstalled=e=>{e.preventDefault(),e.stopPropagation(),x.style.display="none"},e.onbeforeinstallprompt=e=>{e.preventDefault(),e.stopPropagation(),x.style.display="block",x.onclick=()=>{e.prompt()}};const g=e.location,b=e.history,y=g.pathname,v=n("error"),w=n("frame"),E=n("frame-view"),C=n("status"),x=n("install"),T=t.head,A=t.body,_=r('meta[name="description"]'),L=r('link[rel="canonical"]'),S=Xa.$;{
const{_a:K,_b:$,_d:Y,_e:Q,_f:ee,_g:te,_h:ne,_i:re,_j:oe,_k:ie,_l:se,_m:ae,_n:ce,_o:le,_v:de,_w:ue,_p:he,_q:pe,_r:fe}=Fa;if((()=>{S(K,$);const e=new URL(g.href),n=e.hostname,r=e.origin;switch(e.protocol){case"http:":if("localhost"!==n)return e.protocol="https:",e.pathname="/",e.host=n,g.replace(e.href),!1;break;case"https:":break;default:return!0}switch(n){case"whitespider.cf":case"whitespider.tk":case"whitespider.dev":case"whitespider.web.app":case"whitespider.pages.dev":
case"whitespider.firebaseapp.com":return e.host="nettleweb.com",e.pathname="/",g.replace(e.href),!1}{const e=t[le](ne);if(null==e||e[oe](re)!==se)return!0}for(const e of t[ae](ce)){switch(e[oe]("type")||""){case"":case"text/javascript":case"application/javascript":break;default:return e.remove(),!0}const t=e[oe]("src");if(!t||e.textContent)return e.remove(),!0;const n=new URL(t.startsWith("//")?"https:"+t:t,r);if(n.origin!==r){if("https:"===n.protocol){const e=n.host.split("."),t=e.length
;if("com"===e[t-1]){const n=e[t-2];if(n.indexOf("google")>=0||n.indexOf("firebase")>=0)continue}}return e.remove(),!0}}return L[oe]("href")!==ee||null==t[le](he)||null==t[le](pe)||t[fe]!==K.slice(2,11)})()){S(Q,ie);const me=(new DOMParser).parseFromString(de,"application/xhtml+xml");me.title=te;const ge=me.body;ge.innerHTML=Y;{const be=me.createElement("button");be.innerHTML=ue,be.setAttribute("type","button"),be.addEventListener("click",(()=>{g.replace(ee)}),{passive:!0}),ge.appendChild(be)}
return void t.documentElement.replaceWith(me.documentElement)}for(const ye of Object.getOwnPropertyNames(Fa))2===ye.length&&delete Fa[ye]}if(e!==e.top){if("null"===(null===(f=g.ancestorOrigins)||void 0===f?void 0:f.item(0))){const ve=t.createElement("div");return ve.style.padding="15px",ve.textContent="Click here to continue",ve.onclick=()=>{const e=t.createElement("embed");e.type="text/plain",e.width="1280",e.height="720",e.src="https://nettleweb.com/embed.html",h(e)},A.innerHTML="",
void A.appendChild(ve)}if("https://nettleweb.com"!==g.origin)return void g.replace("https://nettleweb.com/embed.html")}Se(B({appId:"1:176227430389:web:94270de43b7eb971c03abc",apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",projectId:"whitespider",authDomain:"whitespider.firebaseapp.com",databaseURL:"https://whitespider-default-rtdb.firebaseio.com",storageBucket:"whitespider.appspot.com",measurementId:"G-F72WBJT57S",messagingSenderId:"176227430389"},"NettleWeb"))
;const j=new MutationObserver((e=>{const t=A.clientWidth,n=A.clientHeight;for(const r of e)for(const e of r.addedNodes){const{clientLeft:r,clientTop:o,clientWidth:i,clientHeight:s}=e;"number"==typeof r&&"number"==typeof o&&"number"==typeof i&&"number"==typeof s&&r<50&&o<50&&i>t-100&&s>n-100?(e.removeAttribute("style"),e.innerHTML="",e.remove()):"iframe"===(e.tagName||"").toLowerCase()&&e.setAttribute("credentialless","true")}}));j.observe(A,{subtree:!0,childList:!0,attributes:!0})
;const I=t.documentElement.clientWidth<800,O=new ea(e),{localStorage:M}=O;let P,D,R,N,U,F,z,H,q,V,W=null;if(null!==(m=e.isSecureContext)&&void 0!==m?m:"https:"===g.protocol){if(O.persistent)try{const we=await a("/manifest.json","no-cache");if(null!=we){const ke=JSON.parse(we).version;if(ke!==M.get("__mf_version")){A.innerHTML="Updating contents...";const Ee=e.caches;for(const Ce of await Ee.keys())await Ee.delete(Ce);return M.set("__mf_version",ke),void g.reload()}n("version").textContent="v"+ke
}P=M.get("__secrets_")||void 0}catch(xe){}else o("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");try{const Te=e.navigator.serviceWorker;null!=Te&&(await Te.register("/sw.js",{type:"classic",scope:"/",updateViaCache:"none"}),await Te.ready)}catch(Ae){}}try{const _e=await e.fetch("/d/index.json",{mode:"same-origin",cache:"no-cache",method:"GET"});if(!_e.ok)throw Error("Remote returned error status code: "+_e.status)
;z=Ls.decode(Nt(new Uint8Array(await _e.arrayBuffer())))}catch(Le){return void o("Failed to initialize local game list. Message: "+Le)}n("content-page").outerHTML=Fa.pages;try{const je=e.top;null!=je&&(U=je===e?e:je.origin===e.origin?je:null)}catch(Ie){}v.onclick=()=>{v.innerHTML="",v.style.display="none"},n("frame-close").onclick=()=>{w.innerHTML="",E.style.display="none",b.replaceState(void 0,"","/"),_.setAttribute("content",""),L.setAttribute("href","https://nettleweb.com/")},
n("frame-newtab").onclick=()=>{const e=w.firstElementChild;null!=e&&(w.innerHTML="",E.style.display="none",h(e))};{const Oe=r("link[rel*='icon']"),Me=n("backend-url"),Pe=n("overlay"),De=n("notice"),Be=n("theme"),Re=n("tab-cloaking"),Ne=n("stealth-mode");let Ue;function Fe(e){if(null!=R&&(R.disconnect(),R.close()),null==N){const{q:e,r:t}=Fa;null!=e&&null!=t&&(N=e+t+Ga)}R=k(e||N||"https://service.nettleweb.com/",{path:"/webapi/",secure:!0,upgrade:!0,timeout:1e4,forceNew:!0,multiplex:!1,
protocols:[],transports:["polling","websocket"],autoConnect:!0,reconnection:!0,rememberUpgrade:!0,reconnectionDelay:5e3,closeOnBeforeunload:!0}),C.innerHTML="Connecting...",C.style.color="#808000",R.on("an",(e=>{"string"==typeof e&&e.length>0&&(De.textContent=e,De.style.display="block")})),"string"!=typeof D&&R.once("lr",(e=>{D=e})),R.io.on("open",(()=>{C.innerHTML="\u2713Connected",C.style.color="#008000"})),R.io.on("close",(()=>{C.innerHTML="\u2715Disconnected",C.style.color="#ff0000"})),
R.io.on("reconnect_attempt",(()=>{C.innerHTML="Connecting...",C.style.color="#808000"})),R.io.on("reconnect_error",(()=>{C.innerHTML="\u2715Disconnected",C.style.color="#ff0000"})),R.io.on("reconnect",(()=>{C.innerHTML="\u2713Connected",C.style.color="#008000",null!=P&&R.emit("login",P)}))}function ze(e){switch(null==Ue&&(Ue=t.createElement("link"),Ue.rel="stylesheet",Ue.type="text/css",Ue.href="index.dark.css",T.appendChild(Ue)),e){case"light":Ue.disabled=!0,Ue.removeAttribute("media");break
;case"dark":Ue.disabled=!1,Ue.removeAttribute("media");break;default:Ue.media="all and (prefers-color-scheme: dark)",Ue.disabled=!1}}function He(e){switch(e){case"empty":F=!0,t.title="\u2060",Oe.type="image/x-icon",Oe.href="/res/empty.ico";break;case"google":F=!0,t.title="Google",Oe.type="image/x-icon",Oe.href="/res/google.ico";break;case"classroom":F=!0,t.title="Home",Oe.type="image/png",Oe.href="/res/classroom.png";break;default:F=!1,t.title="NettleWeb",Oe.type="image/x-icon",
Oe.href="/favicon.ico"}}function qe(e){switch(e){case"blank":t.onblur=t.onmouseleave=e=>{Pe.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),Pe.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Pe.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Pe.removeAttribute("data-x"))},Pe.innerHTML="",Pe.removeAttribute("data-x");break;case"google":t.onblur=t.onmouseleave=e=>{Pe.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),
Pe.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Pe.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Pe.removeAttribute("data-x"))},Pe.innerHTML='<iframe width="1024" height="768" allowfullscreen="true" allowpaymentrequest="true" name="Frame" allow="fullscreen payment" loading="lazy" scrolling="no" frameborder="0" credentialless="true" referrerpolicy="no-referrer" src="https://www.google.com/webhp?igu=1"></iframe>',Pe.removeAttribute("data-x");break;default:
Pe.innerHTML="",Pe.removeAttribute("data-x"),t.onblur=t.onmouseleave=t.onmousedown=t.ontouchstart=null}}Me.onblur=()=>{const e=i(Me.value.trim());if(null!=e){const t=e.href;M.set("__backendURL_",t),Fe(Me.value=t)}else M.delete("__backendURL_"),Fe(Me.value="")},Be.onchange=()=>{const e=Be.value;ze(e),M.set("__set_theme",e)},Re.onchange=()=>{const e=Re.value;He(e),M.set("__set_tabc",e)},Ne.onchange=()=>{const e=Ne.value;qe(e),M.set("__set_sm",e)};{const Ve=M.get("__backendURL_")||"";Fe(Ve),
Me.value=Ve}{const We=M.get("__set_theme")||"default";ze(We),Be.value=We}{const Ge=M.get("__set_tabc")||"disabled";He(Ge),Re.value=Ge}{const Je=M.get("__set_sm")||"disabled";qe(Je),Ne.value=Je}}{const Xe=n("headlines");p(47).then((e=>{if(Array.isArray(e)&&0!==e.length){Xe.innerHTML="";for(const n of e){const e=t.createElement("div");{const r=t.createElement("img");r.src=n.urlToImage||"/res/preview.svg",r.alt="Preview",r.width=160,r.height=90,r.loading="lazy",r.decoding="async",r.draggable=!1,
e.appendChild(r)}{const r=t.createElement("div");{const e=t.createElement("div");e.className="title",e.textContent=n.title,r.appendChild(e)}{const e=t.createElement("div");e.className="desc",e.textContent=n.description||"Description is not available for this article.",r.appendChild(e)}{const e=t.createElement("div");e.className="time",e.textContent="Source: "+(n.source.name||"unknown")+"; Author: "+(n.author||"unknown")+"; Published at "+new Date(n.publishedAt).toString(),r.appendChild(e)}
e.appendChild(r)}e.onclick=()=>{u(n.url)},Xe.appendChild(e)}}else Xe.innerHTML="Sorry, no articles are available at this moment."})).catch((e=>{Xe.innerHTML="Failed to fetch articles. Message: "+e}))}{
const Ze=n("game-container"),Ke=n("player"),$e=n("game-page"),Ye=n("edit"),Qe=n("name"),et=n("type"),tt=n("tags"),nt=n("date"),rt=n("user"),ot=n("desc"),it=n("ecode"),st=n("dlink"),at=n("lock"),ct=n("e-name"),lt=n("e-tags"),dt=n("e-desc"),ut=n("e-subm"),ht=n("editor"),pt=n("s-games"),ft=n("controller"),mt=n("gnav-back"),gt=n("gnav-forward"),bt=n("gnav-page-no"),yt=n("gnav-page-count"),vt=[];let wt="p",kt="all",Et="",Ct=0;{const _t=n("game-search"),Lt=r("#game-search>input");let St=0
;_t.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),Et=Lt.value.trim().toLowerCase(),clearTimeout(St),Tt()},Lt.onblur=()=>{Et=Lt.value.trim().toLowerCase(),clearTimeout(St),Tt()},Lt.oninput=()=>{clearTimeout(St),St=setTimeout((()=>{Et=Lt.value.trim().toLowerCase(),Tt()}),1e3)}}{const jt=t.querySelectorAll("#game-category>button");for(const It of jt)It.onclick=()=>{for(const e of jt)e.removeAttribute("data-current");kt=It.getAttribute("data-match")||"all",It.setAttribute("data-current",""),
Tt()}}{const Ot=n("game-sort");Ot.value=wt=M.get("__gamesortorder")||"p",Ot.onchange=()=>{M.set("__gamesortorder",wt=Ot.value),Tt()}}function xt(){switch(kt){case"all":return Et.length>0?z.filter((e=>e.name.toLowerCase().indexOf(Et)>=0||e.tags.indexOf(Et)>=0)):[...z];case"html5":return z.filter((e=>"html5"===e.type&&(0===Et.length||e.name.toLowerCase().indexOf(Et)>=0||e.tags.indexOf(Et)>=0)));case"flash":
return z.filter((e=>"flash"===e.type&&(0===Et.length||e.name.toLowerCase().indexOf(Et)>=0||e.tags.indexOf(Et)>=0)));case"dos":return z.filter((e=>"dos"===e.type&&(0===Et.length||e.name.toLowerCase().indexOf(Et)>=0||e.tags.indexOf(Et)>=0)));default:return z.filter((e=>e.tags.split(",").indexOf(kt)>=0&&(0===Et.length||e.name.toLowerCase().indexOf(Et)>=0)))}}function Tt(){Ct=0,vt.length=0;const e=xt();if(0===e.length)return mt.disabled=!0,gt.disabled=!0,void(Ze.innerHTML="No results found :(")
;switch(wt){case"r":s(e);break;case"d":e.sort(((e,t)=>t.date-e.date));break;case"p":e.sort(((e,t)=>(t.count||0)-(e.count||0)))}for(let t=0;t<e.length;t+=100)vt.push(e.slice(t,t+100));At()}function At(){bt.min="1",bt.max=yt.innerHTML=vt.length+"",bt.value=Ct+1+"",Ze.innerHTML="",mt.disabled=Ct<1,Ct>=vt.length-1?gt.disabled=!0:gt.disabled=!1;for(const e of vt[Ct]){const{name:n,prev:r,date:o}=e,i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",
i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),q(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}if(e.path.startsWith("https://")){const e=t.createElement("img");e.src="/res/cloud.svg",e.alt="Cloud",e.title="Embedded from third-party servers",e.width=24,e.height=24,e.loading="lazy",e.decoding="async",
e.draggable=!1,i.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}Ze.appendChild(i)}}
q=async({name:e,type:r,tags:i,date:a,path:c,desc:d,user:u})=>{null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,$e.setAttribute("data-current",""),Ke.appendChild(l("/player.html?name="+encodeURIComponent(e)+"&type="+r+"&url="+encodeURIComponent(c))),W=()=>{W=null,at.title="Enable scroll lock",at.style.backgroundImage='url("res/lock-open-w.svg")',Ke.innerHTML="",n("content").style.overflow="",F||(t.title="NettleWeb"),b.replaceState(void 0,"","/"),
_.setAttribute("content",""),L.setAttribute("href","https://nettleweb.com/")},pt.innerHTML="",rt.innerHTML="",Qe.textContent=e,et.textContent=r.toUpperCase(),tt.textContent=i.replace(/\,/g,", ")||"None",nt.textContent=new Date(a).toLocaleDateString("POSIX",{month:"2-digit",day:"2-digit",year:"numeric"}),ot.textContent=d||"No information provided by the uploader.",ft.style.display="block",Ke.scrollIntoView({block:"start",inline:"start",behavior:"instant"});{
const n="/"+a.toString(36),r="https://nettleweb.com"+n;F||(t.title=e+" - NettleWeb"),b.replaceState(void 0,"",n),st.textContent=r,it.textContent='<embed type="text/plain" width="1280" height="720" src="'+r+'" />',_.setAttribute("content","Play "+e+" for free at NettleWeb! 100% online; No plugins required. "+d.slice(0,30).trim()+"..."),L.setAttribute("href",r)}Ye.innerHTML="Edit Game Info",Ye.disabled=!1,Ye.onclick=()=>{null!=P?(ct.value=e,lt.value=i,dt.value=d,ht.style.display="block",
Ye.style.display="none"):G.click()},ut.onclick=()=>{if(null==P)return void o("Invalid session. Please refresh this page and try again.");const e=ct.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Game name must not be empty.");if(e.length>256)return void o("Game name must be less than 256 characters in length.");const t=dt.value.replace(/\s+/g," ").trim(),n=lt.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",")
;n.length>300?o("Game tags list must be less than 300 characters long in total."):t.length>5e3?o("Game description text must be less than 5000 characters in length."):(ut.disabled=!0,p(23,[P,a,e,n,t]).then((()=>{ut.disabled=!1,Ye.disabled=!0,Ye.innerHTML="Requested. Pending review...",ht.style.display="none",Ye.style.display="block"})).catch((e=>{o("Failed to submit request. Message: "+e),ut.disabled=!1})))};for(const e of s(z.filter((e=>!e.path.startsWith("https://")))).slice(3,9)){
const{name:n,prev:r,date:o}=e;if(a!==o&&pt.childElementCount<5){const i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),q(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}switch(e.type){case"html5":{
const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}pt.appendChild(i)}}{const e=await p(1,u||"anonymous");{const n=t.createElement("img");n.alt="Avatar",
n.width=40,n.height=40,n.loading="eager",n.decoding="sync",n.draggable=!1,rt.appendChild(n);{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));n.src=t,await n.decode(),URL.revokeObjectURL(t)}}{const n=t.createElement("div");switch(n.className="user",n.textContent=e.id,e.vip){case 3:n.setAttribute("vip","gold");break;case 4:n.setAttribute("vip","diamond")}rt.appendChild(n)}rt.onclick=()=>{V(e.uid).catch((e=>{o("Failed to open user profile. Message: "+e)}))}}
if("localhost"!==g.hostname)try{await p(14,a)}catch(e){}},mt.onclick=()=>{Ct--,At(),Ze.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},gt.onclick=()=>{Ct++,At(),Ze.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},bt.onblur=()=>{const e=parseInt(bt.value.trim(),10)||0;Ct+1!==e&&(e<1||e>vt.length?(bt.value="1",Ct=0):Ct=e-1,At(),Ze.scrollIntoView({behavior:"instant",inline:"start",block:"start"}))},bt.onchange=()=>{bt.blur()},at.onclick=()=>{
"Disable scroll lock"===at.title?(at.title="Enable scroll lock",at.style.backgroundImage='url("res/lock-open-w.svg")',n("content").style.overflow=""):(at.title="Disable scroll lock",at.style.backgroundImage='url("res/lock-w.svg")',n("content").style.overflow="hidden",Ke.scrollIntoView({block:"start",inline:"start",behavior:"instant"}))},n("hide").onclick=()=>{ft.style.display="none"},n("newtab").onclick=()=>{const e=Ke.firstElementChild;null!=e&&(h(e),
Ke.textContent="Notice: This frame has been closed automatically for saving memory. Please refresh this page to re-open the frame.")},n("fullscreen").onclick=()=>{if(t.fullscreenEnabled){const e=Ke.firstElementChild;null!=e&&e.requestFullscreen({navigationUI:"hide"})}else o("Fullscreen mode is not supported in the current browsing context.")},n("e-canc").onclick=()=>{ht.style.display="none",Ye.style.display="block"},Tt()}{
const Mt=n("nav-back"),Pt=n("nav-forward"),Dt=n("nav-page-no"),Bt=n("nav-page-count"),Ut=n("item-category"),Ft=n("item-container");p(42).then((e=>{function o(){return"all"===u?h.length>0?c.filter((e=>e.name.toLowerCase().indexOf(h)>=0||e.desc.toLowerCase().indexOf(h)>=0||e.cats.indexOf(h)>=0)):[...c]:c.filter((e=>e.cats.split(",").indexOf(u)>=0&&(0===h.length||e.name.toLowerCase().indexOf(h)>=0||e.desc.toLowerCase().indexOf(h)>=0)))}function i(){p=0,l.length=0;const e=o()
;if(0===e.length)return Mt.disabled=!0,Pt.disabled=!0,void(Ft.innerHTML="Sorry, no matching results found :(");switch(d){case"r":s(e);break;case"d":e.sort(((e,t)=>t.date-e.date))}for(let t=0;t<e.length;t+=100)l.push(e.slice(t,t+100));a()}function a(){Dt.min="1",Dt.max=Bt.innerHTML=l.length+"",Dt.value=p+1+"",Ft.innerHTML="",Mt.disabled=p<1,p>=l.length-1?Pt.disabled=!0:Pt.disabled=!1;for(const e of l[p]){const n=t.createElement("div");n.className="item",n.onclick=()=>{},
n.style.backgroundImage='url("'+e.prev+'"), url("/res/preview.svg")';{const r=t.createElement("div");r.textContent=e.name,n.appendChild(r)}{const r=t.createElement("span"),o=e.price;r.textContent=("GBP"===o.cur?"\xa3":"$")+o.val.toFixed(2),n.appendChild(r)}Ft.appendChild(n)}}if(null==e||"object"!=typeof e)return void(Ft.innerHTML="Error: Failed to load contents. Message: Failed to parse server response.");const c=e.pros,l=[]
;if(!Array.isArray(c)||0===c.length)return void(Ft.innerHTML="Sorry, no items are available at this moment.");let d="p",u="all",h="",p=0;{const n=e.cats,r=Ut.children;{const e=t.createElement("button");e.type="button",e.innerHTML="All",e.setAttribute("data-current",""),e.onclick=()=>{for(const e of r)e.removeAttribute("data-current");u="all",i(),e.setAttribute("data-current","")},Ut.appendChild(e)}if(Array.isArray(n)&&n.length>0)for(const e of n){const n=t.createElement("button")
;n.type="button",n.textContent=e,n.onclick=()=>{for(const e of r)e.removeAttribute("data-current");u=e,i(),n.setAttribute("data-current","")},Ut.appendChild(n)}}{const e=n("item-search"),t=r("#item-search>input");let o=0;e.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),h=t.value.trim().toLowerCase(),clearTimeout(o),i()},t.onblur=()=>{h=t.value.trim().toLowerCase(),clearTimeout(o),i()},t.oninput=()=>{clearTimeout(o),o=setTimeout((()=>{h=t.value.trim().toLowerCase(),i()}),1e3)}}{
const e=n("item-sort");e.value=d=M.get("_$so")||"n",e.onchange=()=>{M.set("_$so",d=e.value),i()}}Mt.onclick=()=>{p--,a(),Ft.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},Pt.onclick=()=>{p++,a(),Ft.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},Dt.onblur=()=>{const e=parseInt(Dt.value.trim(),10)||0;p+1!==e&&(e<1||e>l.length?(Dt.value="1",p=0):p=e-1,a(),Ft.scrollIntoView({behavior:"instant",inline:"start",block:"start"}))},Dt.onchange=()=>{Dt.blur()},i()
})).catch((e=>{Ft.innerHTML="Error: Failed to load contents. Message: "+e}))}{const zt=n("addr"),Ht=n("ub-mode");function qt(t){switch(Ht.value){case"raw-embed-v2":p(41,[t,0]).then((e=>{c(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}));break;case"raw-embed":c(t);break;case"prq-embed":!function(t){const n=(U||e).PaymentRequest;"function"==typeof n?new n([{data:[t],supportedMethods:"https://nettleweb.com/res/pay.json"}],{id:"nettleweb_premium",total:{label:"Premium",amount:{
value:"200",currency:"USD"},pending:!0},modifiers:[],displayItems:[]}).show():o("Error: Your browser does not support this feature.")}(t);break;default:p(41,[t,1]).then((e=>{c(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}))}}function Vt(e,t){const n=i(e=e.replace(/\s+/g," ").trim());if(null!=n)return n.href;if(e.includes(" "))return t+encodeURIComponent(e);const r=e.indexOf("/");if(0===r)return t+encodeURIComponent(e);if(r>0){if(Wt(e.substring(0,r)))return"https://"+e
}else if(Wt(e)&&e.includes("."))return"https://"+e;return t+encodeURIComponent(e)}function Wt(e){e=e.toLowerCase();for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if((n<48||n>57)&&(n<97||n>122)&&45!==n&&46!==n)return!1}return!0}Ht.value=M.get("__unbl_mode_")||"puppeteer",Ht.onchange=()=>{M.set("__unbl_mode_",Ht.value)},zt.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=zt.value.trim();t.length>0&&qt(Vt(t,"https://www.google.com/search?igu=1&q="))}},
n("ub-google").onclick=()=>{qt("https://www.google.com/webhp?igu=1")},n("ub-discord").onclick=()=>{qt("https://discord.com/")},n("ub-facebook").onclick=()=>{qt("https://www.facebook.com/")},n("ub-instagram").onclick=()=>{qt("https://www.instagram.com/")}}{const Gt=r("#yt-search>input"),Jt=r("#yt-search>button"),Xt=n("yt-load-more"),Zt=n("yt-results"),Kt=n("yt-server");Kt.value=M.get("__yt_ssvr")||"official";let $t=null;function Yt(e){switch(e.protocol){case"http:":case"https:":break;default:
return null}switch(e.host){case"piped.video":case"youtube.com":case"youtube-nocookie.com":case"www.youtube.com":case"www.youtube-nocookie.com":const t=e.pathname;return"/watch"===t?e.searchParams.get("v")||null:t.startsWith("/embed/")&&t.substring(7)||null;case"youtu.be":return e.pathname.substring(1)||null;default:return null}}function Qt(e){const t=Kt.value;if("official"===t)return void c("https://www.youtube-nocookie.com/embed/"+e)
;const n=new URL("piped"===t?"https://cf.piped.video/watch":"https://piped-material.xn--17b.net/watch");{const t=n.searchParams;t.set("v",e),t.set("hl","en"),t.set("theme","light"),t.set("region","us"),t.set("quality","1080"),t.set("autoplay","false"),t.set("watchHistory","false"),t.set("sponsorblock","false"),t.set("playerAutoPlay","true")}c(n.href)}async function en(){o(null),Jt.disabled=!0,Gt.disabled=!0,Xt.style.display="none";const e=await p(40,[Gt.value.trim(),$t])
;if(null==e||"object"!=typeof e)return void o("Error: API server returned invalid response.");const n=e.items;if(!Array.isArray(n)||0===n.length)return void o("No results match your search.");for(const e of n){const n=t.createElement("div");{const r=t.createElement("img");r.src=e.thumbnail,r.alt="Preview",r.width=160,r.height=90,r.loading="lazy",r.decoding="async",r.draggable=!1,n.appendChild(r)}{const r=t.createElement("div");{const n=t.createElement("div");n.className="title",
n.textContent=e.title,r.appendChild(n)}{const n=t.createElement("div");n.className="desc",n.textContent=e.shortDescription,r.appendChild(n)}{const n=t.createElement("div");n.className="time",n.textContent=e.uploadedDate+"; Views: "+e.views,r.appendChild(n)}n.appendChild(r)}n.onclick=t=>{t.preventDefault(),t.stopPropagation(),Qt(e.url.slice(9))},Zt.appendChild(n)}const r=e.nextpage;null!=r&&(Xt.style.display="block",Xt.onclick=()=>{$t=r,en().then((()=>{Jt.disabled=!1,Gt.disabled=!1}))})}
n("yt-search").onsubmit=e=>{e.preventDefault(),e.stopPropagation(),$t=null,Zt.innerHTML="";const t=i(Gt.value);if(null==t)return void en().then((()=>{Jt.disabled=!1,Gt.disabled=!1}));o(null),Xt.style.display="none";const n=Yt(t);null!=n?Qt(n):o("Error: Failed to parse YouTube video ID from the provided URL.")},Kt.onchange=()=>{M.set("__yt_ssvr",Kt.value)}}{const tn=n("emulator"),nn=n("core"),rn=n("bios"),on=n("game-rom");tn.onchange=()=>{switch(tn.value){case"flash":nn.disabled=!0,
rn.disabled=!0,on.accept=".swf";break;case"dos":nn.disabled=!0,rn.disabled=!0,on.accept=".jsdos, .zip";break;default:tn.value="emu",nn.disabled=!1,rn.disabled=!1,on.accept="*/*"}},n("startemu").onclick=()=>{var e,t;const n=null===(e=on.files)||void 0===e?void 0:e.item(0);if(null==n)return void o("Please choose a valid game ROM file.");const r=tn.value,i=new URLSearchParams("");if(i.set("name",n.name),i.set("type",r),i.set("url",URL.createObjectURL(n)),"emu"===r){i.set("core",nn.value)
;const e=null===(t=rn.files)||void 0===t?void 0:t.item(0);null!=e&&i.set("bios",URL.createObjectURL(e))}c("/player.html?"+i.toString())}}{const sn=n("game-name"),an=n("game-type"),cn=n("game-file"),ln=n("game-tags"),dn=n("game-desc"),un=n("upload"),hn=n("upload-message");an.onchange=()=>{switch(an.value){case"html5":cn.accept=".zip";break;case"flash":cn.accept=".swf";break;case"dos":cn.accept=".jsdos";break;default:cn.accept="*/*"}},hn.onclick=()=>{hn.innerHTML="",hn.style.display="none"},
un.onclick=async()=>{var e;const t=sn.value.replace(/\s+/g," ").trim();if(0===t.length)return void o("Game name must not be empty.");if(t.length>256)return void o("Game name must be less than 256 characters in length.");const n=null===(e=cn.files)||void 0===e?void 0:e.item(0);if(null==n)return void o("Please choose a valid game file.");if(0===n.size)return void o("Uploading empty game files is not allowed.")
;if(n.size>25e6)return void o("Uploading files larger than 25MB is not supported currently.");if(null==P)return void o("Invalid session. Please refresh this page and try again.");const r=dn.value.replace(/\s+/g," ").trim(),i=ln.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(i.length>300)o("Game tags list must be less than 300 characters long in total.");else if(r.length>5e3)o("Game description text must be less than 5000 characters in length.");else{
un.disabled=!0,hn.innerHTML="Processing...",hn.style.color="#808080",hn.style.display="block";try{await p(13,[P,t,an.value,i,r,await n.arrayBuffer()]),hn.innerHTML="\u2713Success!",hn.style.color="#008000",hn.style.display="block"}catch(e){hn.innerHTML="\u2715Error",hn.style.color="#ff0000",hn.style.display="block",o("Failed to upload the game. Message: "+e)}sn.value="",cn.value="",ln.value="",dn.value="",un.disabled=!1}}}{
const pn=n("picker"),fn=n("global"),mn=n("friends"),gn=n("chatgpt"),bn=n("msglist"),yn=n("history"),vn=n("channels"),wn=n("ufile"),kn=n("messages"),En=kn.children,Cn=n("channel-name"),xn=n("sendmsg"),Tn=n("chat-btn"),An=n("community-page");{const _n=n("chat"),Ln=n("sidemenu"),Sn=n("toggle");Sn.onclick=()=>{"Close"===Sn.title?(Sn.title="Menu",_n.style.width="100%",Ln.style.display="none"):(Sn.title="Close",_n.removeAttribute("style"),Ln.removeAttribute("style"))},I&&(Sn.title="Menu",
_n.style.width="100%",Ln.style.display="none")}{const jn=vn.children,In=bn.children;let On,Mn=!1;function Pn({id:e,msg:n,uid:r,vip:i,user:s,icon:a,files:c}){const l=t.createElement("div");l.setAttribute("id",e);const d=t.createElement("div");switch(d.className="user",d.textContent=s,i){case 3:d.setAttribute("vip","gold");break;case 4:d.setAttribute("vip","diamond")}{const e=t.createElement("img");if(e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,
"string"!=typeof a){const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}else e.src=a;null!=r&&(e.style.cursor=d.style.cursor="pointer",e.onclick=d.onclick=()=>{V(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),l.appendChild(e)}{const e=t.createElement("div");if(e.appendChild(d),n.length>0){const r=t.createElement("span");r.textContent=n,e.appendChild(r)}
for(const{name:n,type:r,url:o}of c){{const r=t.createElement("a");r.rel="noopener nofollow",r.href=o,r.target="_blank",r.download="",r.textContent=n||"file",e.appendChild(r)}switch(r.split("/",2)[0]){case"image":{const n=t.createElement("img");n.src=o,n.alt="Attachment",n.width=500,n.height=500,n.loading="lazy",n.decoding="async",n.draggable=!1,e.appendChild(n)}break;case"audio":{const n=t.createElement("audio");n.src=o,n.muted=!1,n.preload="metadata",n.controls=!0,e.appendChild(n)}break
;case"video":{const n=t.createElement("video");n.src=o,n.muted=!0,n.width=500,n.height=500,n.autoplay=!0,n.controls=!0,e.appendChild(n)}}}l.appendChild(e)}return l}function Dn(e,t){if(On===e){const e=kn.scrollHeight-kn.clientHeight;kn.appendChild(Pn(t)),e===kn.scrollTop&&kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight})}}function Bn(e,t){if(On===e)for(const e of En)if(e.getAttribute("id")===t){e.remove();break}}function Rn(e,t,n){
if(On===e)for(const e of En)if(e.getAttribute("id")===t){const r=e.querySelector("div>span");null!=r?r.textContent=n:o("Failed to update message: "+t);break}}async function Nn(){if(0===jn.length){wn.disabled=!0,xn.disabled=!0;try{const n=await p(22);for(const r of n)if("#"===r[0]){const e=t.createElement("span");e.textContent=r.slice(1),vn.appendChild(e)}else{const[n,i,s]=r.split(":",3),a=t.createElement("div");a.textContent=n,a.onclick=async()=>{var t;if(!Mn){Mn=!0;try{const n=await p(7,[On=i])
;e=null===(t=n[n.length-1])||void 0===t?void 0:t.id,kn.innerHTML="";for(const e of n)kn.prepend(Pn(e));kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight})}catch(e){return void o("Failed to initialize channel. Message: "+e)}for(const e of jn)e.removeAttribute("data-current");a.setAttribute("data-current",""),Cn.textContent=n,wn.style.display="f"===s?"block":"none",Mn=!1}},vn.appendChild(a)}}catch(e){return void o("Failed to load channel list. Message: "+e)}}let e;kn.innerHTML="",
Cn.innerHTML="Global",R.removeAllListeners("msg"),R.removeAllListeners("msgdel"),R.removeAllListeners("msgupd"),R.on("msg",Dn),R.on("msgdel",Bn),R.on("msgupd",Rn);{const t=vn.querySelector("div");null!=t?(kn.onscroll=async()=>{if(!Mn&&0===kn.scrollTop){Mn=!0;try{const t=await p(7,[On,e]);if(t.length>0){e=t[t.length-1].id;const n=kn.scrollHeight;for(const e of t)kn.prepend(Pn(e));kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight-n})}}catch(e){o("Failed to fetch messages. Reason: "+e)}
Mn=!1}},xn.onkeydown=e=>{if("Enter"===e.key){if(e.preventDefault(),e.stopPropagation(),null==P)return void G.click();const t=xn.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");xn.value="",xn.disabled=!0,p(8,[P,On,t]).then((()=>{xn.disabled=!1})).catch((e=>{o("Failed to post text message. Message: "+e),xn.disabled=!1}))}},
t.click()):(vn.innerHTML="No public channels are available at this moment.",kn.onscroll=null,xn.onkeydown=null)}xn.onfocus=e=>{e.preventDefault(),e.stopPropagation(),null==P&&G.click()},mn.removeAttribute("data-current"),gn.removeAttribute("data-current"),bn.removeAttribute("style"),yn.removeAttribute("style"),fn.setAttribute("data-current",""),vn.style.display="block",wn.disabled=!1,xn.disabled=!1}async function Un(){if(null==P)return void G.click()
;if("string"!=typeof D)return void o("Internal error");const e=(e,i,s,a)=>{const c=t.createElement("div");c.setAttribute("data-user",i);{const e=t.createElement("img");e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1;{const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}c.appendChild(e)}{const e=t.createElement("div");e.textContent=s,
c.appendChild(e)}return c.onclick=async()=>{if(!Mn){Mn=!0;try{n=(await p(28,[P,On=e])).reverse(),kn.innerHTML="";for(const e of n.slice(0,r=20))kn.prepend(Pn(await p(29,[P,e])));kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight})}catch(e){return void o("Failed to fetch messages. Reason: "+e)}for(const e of In)e.removeAttribute("data-current");c.setAttribute("data-current",""),Cn.textContent=s,Mn=!1}},bn.appendChild(c),c};if(0===In.length){wn.disabled=!0,xn.disabled=!0;try{
const t=await p(27,P);for(const{id:n,type:r,users:o}of t)if("d"===r){if(1!==o.length)throw Error("Invalid user list for DM channel.");const t=o[0],{id:r,avatar:i}=await p(1,t);e(n,t,r,i)}}catch(e){return void o("Failed to load friends list. Message: "+e)}}let n,r=0;kn.innerHTML="",Cn.innerHTML="Friends",R.removeAllListeners("msg"),R.removeAllListeners("msgdel"),R.removeAllListeners("msgupd"),R.on("msg",Dn),R.on("msgdel",Bn),R.on("msgupd",Rn);{const e=bn.querySelector("div");null!=e&&e.click()}
kn.onscroll=async()=>{if(!Mn&&0===kn.scrollTop&&null!=n&&r<n.length){Mn=!0;try{const e=kn.scrollHeight;for(const e of n.slice(r,r+=20))kn.prepend(Pn(await p(29,[P,e])));kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight-e})}catch(e){o("Failed to fetch messages. Reason: "+e)}Mn=!1}},xn.onkeydown=async t=>{if("Enter"===t.key){t.preventDefault(),t.stopPropagation();const n=xn.value.trim();if(n.length<1)return void o("Messages cannot be empty.")
;if(n.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null!=On){xn.value="",xn.disabled=!0;try{if(On.startsWith("tmp$")){const t=On.slice(4),{id:n,avatar:r}=await p(1,t);On=await p(30,[P,[D,t],"dm_channel"]);for(const e of In)e.removeAttribute("data-current");e(On,t,n,r).setAttribute("data-current","")}await p(8,[P,On,n])}catch(e){o("Failed to post text message. Reason: "+e)}}xn.disabled=!1}},fn.removeAttribute("data-current"),gn.removeAttribute("data-current"),
yn.removeAttribute("style"),vn.removeAttribute("style"),mn.setAttribute("data-current","1"),bn.style.display="block",wn.style.display="none",wn.disabled=!0,xn.disabled=!1}wn.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="*/*",e.multiple=!0,e.onchange=async()=>{const t=e.files;if(null!=t&&t.length>0){if(t.length>10)return void o("Uploading more than 10 files at once is not supported.");wn.disabled=!0,xn.disabled=!0;try{const e=[];for(const n of t){
if(n.size<1)throw Error("Empty files are not allowed.");if(n.size>1e7)throw Error("Files larger than 10MB are not supported.");e.push({name:n.name,attachment:await n.arrayBuffer()})}await p(12,[P,On,e])}catch(e){o("Failed to upload file. Message: "+e)}wn.disabled=!1,xn.disabled=!1}},e.click()},fn.onclick=e=>{e.preventDefault(),e.stopPropagation(),Nn()},mn.onclick=e=>{e.preventDefault(),e.stopPropagation(),Un()},n("goto-chat").onclick=Tn.onclick=()=>{null!=W&&W()
;for(const e of X)e.removeAttribute("data-current");Nn().then((()=>{Z.checked=!1,Tn.setAttribute("data-current","1"),An.setAttribute("data-current","1")}))},H=async e=>{if(null!=P){await Un(),null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,Tn.setAttribute("data-current","1"),An.setAttribute("data-current","1");{const t=bn.querySelector('div[data-user="'+e+'"]');if(null!=t)return void t.click()}Cn.textContent=(await p(1,e)).id,On="tmp$"+e}else G.click()}}{
const Fn=yn.children;let zn=null;const Hn=JSON.parse(M.get("__chats")||"[]");function qn({role:e,text:n}){const r=t.createElement("div");{const n=t.createElement("img");n.width=32,n.height=32,n.loading="lazy",n.decoding="async",n.draggable=!1,"u"===e?(n.src="res/user.svg",n.alt="User"):(n.src="res/bot.svg",n.alt="Assistant"),r.appendChild(n)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return kn.appendChild(r),r}function Vn(e){const n=e.title
;if("string"!=typeof n)throw Error("Invalid chat object");const r=t.createElement("div");r.onclick=()=>{for(const e of Fn)e.removeAttribute("data-current");r.setAttribute("data-current","1"),kn.innerHTML="",Cn.textContent=n;for(const t of zn=e.msgs)qn(t);kn.scrollTo({behavior:"instant",left:0,top:kn.scrollHeight})};{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.onclick=t=>{t.preventDefault(),
t.stopPropagation();const n=Hn.indexOf(e,0);n>=0&&(zn=null,r.remove(),Hn.splice(n,1),kn.innerHTML="",M.set("__chats",JSON.stringify(Hn,void 0,0)))},r.appendChild(n)}yn.appendChild(r)}function Wn(){xn.disabled=!1,R.removeAllListeners("gptres"),R.removeAllListeners("gptend"),R.removeAllListeners("gpterr")}n("newchat").onclick=()=>{for(const e of Fn)e.removeAttribute("data-current");zn=null,kn.innerHTML="",Cn.innerHTML="New chat"},gn.onclick=()=>{for(const e of Fn)e.removeAttribute("data-current")
;if(zn=null,kn.innerHTML="",Cn.innerHTML="New chat",R.removeAllListeners("msg"),R.removeAllListeners("msgdel"),R.removeAllListeners("msgupd"),Fn.length<2)for(const e of Hn)Vn(e);kn.onscroll=null,xn.onfocus=null,xn.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=xn.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>8e3)return void o("Messages cannot be longer than 8000 characters.");if(xn.value="",xn.disabled=!0,null==zn){const e={
title:t.slice(0,100),msgs:zn=[]};Vn(e),Hn.push(e)}const n={role:"u",text:t};qn(n),zn.push(n);const r={role:"a",text:"Processing..."},i=qn(r),s=i.lastElementChild;R.on("gptres",(e=>{s.textContent=r.text=e,s.scrollIntoView({block:"end",inline:"end",behavior:"instant"})})),R.on("gptend",(()=>{Wn(),zn.push(r),M.set("__chats",JSON.stringify(Hn,void 0,0))})),R.on("gpterr",(e=>{Wn(),zn.pop(),i.remove(),o("Failed to process the request. Message: "+e)})),R.emit("gptreq",zn)}},
fn.removeAttribute("data-current"),mn.removeAttribute("data-current"),bn.removeAttribute("style"),vn.removeAttribute("style"),gn.setAttribute("data-current","1"),yn.style.display="block",wn.style.display="none",wn.disabled=!0,xn.disabled=!1}}n("emoji").onclick=()=>{if("block"!==pn.style.display){if(null==pn.firstElementChild){const e=new fs({locale:"POSIX",emojiVersion:1e3});e.addEventListener("emoji-click",(e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.unicode
;null!=t&&xn.setRangeText(t,xn.selectionStart||0,xn.selectionEnd||0,"end")})),pn.appendChild(e)}pn.style.display="block"}else pn.style.display="none"},n("discord").onclick=()=>{u("https://discord.gg/djdH3kVd4v")}}const G=n("accn-btn"),J=n("chat-profile"),X=t.querySelectorAll("#nav-bar>button, #content>div:not(#footer), #unbl-content"),Z=n("side-menu");{
const Gn=n("home-btn"),Jn=n("game-btn"),Xn=n("comm-btn"),Zn=n("unbl-btn"),Kn=n("apps-btn"),$n=n("settings"),Yn=n("home-page"),Qn=n("games-page"),er=n("store-page"),tr=n("services-page"),nr=n("site-blocked-page"),rr=n("uploadgames-page"),or=n("accountinfo-page"),ir=n("profile-page"),sr=n("settings-page");n("logo").onclick=Gn.onclick=()=>{null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,Gn.setAttribute("data-current","1"),Yn.setAttribute("data-current","1")},
n("goto-games").onclick=Jn.onclick=()=>{null!=W&&W();for(const e of X)e.removeAttribute("data-current");F||(t.title="Games - NettleWeb"),b.replaceState(void 0,"","/games"),_.setAttribute("content","Play 3500+ HTML5, Flash DOS games online for free! No installation required, works on all devices."),L.setAttribute("href","https://nettleweb.com/games"),Z.checked=!1,W=d,Jn.setAttribute("data-current","1"),Qn.setAttribute("data-current","1")},n("goto-store").onclick=Xn.onclick=()=>{null!=W&&W()
;for(const e of X)e.removeAttribute("data-current");F||(t.title="Store - NettleWeb"),b.replaceState(void 0,"","/store"),_.setAttribute("content","Shop with us! NettleWeb Store is an online marketplace where buyers and sellers connect. Browse and purchase a wide variety of items from our community of users."),L.setAttribute("href","https://nettleweb.com/store"),Z.checked=!1,W=d,Xn.setAttribute("data-current","1"),er.setAttribute("data-current","1")},n("goto-apps").onclick=Kn.onclick=()=>{
null!=W&&W();for(const e of X)e.removeAttribute("data-current");F||(t.title="Apps - NettleWeb"),b.replaceState(void 0,"","/apps"),_.setAttribute("content",""),L.setAttribute("href","https://nettleweb.com/apps"),Z.checked=!1,W=d,Kn.setAttribute("data-current","1"),tr.setAttribute("data-current","1")},Zn.onclick=()=>{null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,Zn.setAttribute("data-current","1"),nr.setAttribute("data-current","1")},n("ug").onclick=()=>{null!=W&&W()
;for(const e of X)e.removeAttribute("data-current");Z.checked=!1,rr.setAttribute("data-current","1")},n("chat-login").onclick=J.onclick=G.onclick=()=>{null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,G.setAttribute("data-current","1"),or.setAttribute("data-current","1")},$n.onclick=e=>{if(e.preventDefault(),e.stopPropagation(),null!=W&&W(),sr.hasAttribute("data-current")){for(const e of X)e.removeAttribute("data-current");Gn.setAttribute("data-current","1"),
Yn.setAttribute("data-current","1")}else{for(const e of X)e.removeAttribute("data-current");sr.setAttribute("data-current","1")}Z.checked=!1};{const ar=n("avatar"),cr=n("userid"),lr=n("pf-games"),dr=n("af"),ur=n("dm");V=async e=>{const n=(e=await p(1,e)).uid;if("string"!=typeof n||n.length<4)throw Error("Failed to parser server response.");null!=W&&W();for(const e of X)e.removeAttribute("data-current");Z.checked=!1,W=d,ir.setAttribute("data-current","1");{const t="/u/"+n
;b.replaceState(void 0,"",t),_.setAttribute("content","@"+(cr.textContent=e.id)+"'s profile at NettleWeb; Join NettleWeb today to play and share online games within our community!"),L.setAttribute("href","https://nettleweb.com"+t)}switch(e.vip){case 3:cr.setAttribute("vip","gold");break;case 4:cr.setAttribute("vip","diamond");break;default:cr.removeAttribute("vip")}dr.onclick=()=>{o("Function not yet implemented.")},ur.onclick=()=>{o("Function not yet implemented.")},lr.innerHTML="",
lr.removeAttribute("style");for(const e of z)if(e.user===n){const{name:n,prev:r,date:o}=e,i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),q(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}switch(e.type){
case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}lr.appendChild(i)}null==lr.firstElementChild&&(lr.style.overflow="unset",
lr.innerHTML="This user has not uploaded any games yet.");{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));ar.src=t,await ar.decode(),URL.revokeObjectURL(t)}}}("/"===y||y.indexOf(".",0)>=0||await(async()=>{switch(y){case"/g":case"/g/":case"/game":case"/game/":case"/games":case"/games/":return Jn.click(),!1;case"/s":case"/s/":case"/shop":case"/shop/":case"/store":case"/store/":return Xn.click(),!1;case"/a":case"/a/":case"/apps":case"/apps/":
return Kn.click(),!1;default:if(y.startsWith("/u/",0)){if(y.length<53)try{return await V(y.slice(3)),!1}catch(e){o("Failed to open user profile. Message: "+e)}return!0}if(y.length>6&&y.length<13){const e=parseInt(y.slice(1),36);if(Number.isSafeInteger(e)&&e>0)for(const t of z)if(t.date===e)return await q(t),!1}return o("Error: Page does not exist: "+y),!0}})())&&(b.replaceState(void 0,"","/"),L.setAttribute("href","https://nettleweb.com/")),n("loading").remove(),
n("content").style.display="block"}{const hr=await a("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7505521340110301");if(null!=hr&&hr.length>0)try{Function("arguments","globalThis","window","frames","self","document",hr).call(e,void 0,e,e,e,e,t)}catch(fr){}else o("You are using an ad blocker. Please disable it to support this website's development.");const pr=window.adsbygoogle||(window.adsbygoogle=[]);for(const mr of t.querySelectorAll("ins.adsbygoogle")){
mr.setAttribute("data-ad-client","ca-pub-7505521340110301"),mr.setAttribute("data-ad-format","auto"),mr.setAttribute("data-full-width-responsive","true");try{pr.push(1)}catch(gr){}}setTimeout((()=>{j.disconnect()}),1e4)}{const br=n("weather");br.innerHTML='Weather Data Source: <a href="https://wetterlang.de/wetter_21_tage/" id="ww_750b630238312_u" target="_blank">Wettervorhersage 21 tage</a>',
br.setAttribute("a",'{"t":"responsive","lang":"en","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722","sl_tof":"7"}'),br.setAttribute("v","1.3"),br.setAttribute("id","ww_750b630238312"),br.setAttribute("loc","auto")}{const yr=t.createElement("script");yr.type="text/javascript",
yr.src="https://app3.weatherwidget.org/js/?id=ww_750b630238312",yr.async=!0,yr.defer=!0,A.appendChild(yr)}{const vr=async()=>{G.innerHTML="My Account",n("ac-prof").style.display="block",n("chat-login").remove(),n("login-dialog").remove();const e=n("ac-name"),r=n("ac-email"),i=n("ac-un"),s=n("ac-edit"),a=n("ac-link"),c=n("ac-name-edit"),l=n("ac-email-edit"),d=n("cp"),u=n("rs"),h=n("tf");"1"===M.get("__?2fa")&&(h.setAttribute("data-enabled",""),h.textContent="Disable Two-Factor")
;const f=n("ch-avatar"),m=f.firstElementChild,b=t.createElement("img");b.alt="Avatar",b.width=40,b.height=40,b.loading="eager",b.decoding="sync",b.draggable=!1,J.appendChild(b);const y=t.createElement("div");y.className="user",J.appendChild(y),J.style.display="block";const v=await p(2,P),w=v.id,k=v.uid;if("string"!=typeof w||w.length<4||"string"!=typeof k||k.length<2)o("Error: Server response parse error.");else{switch(e.textContent=v.name||"Not set",r.textContent=v.email||"Not set",
i.textContent=w,y.textContent=w,n("ac-uid").textContent=k,v.vip){case 3:n("ac-membership").textContent="Gold \u{1f451}",i.setAttribute("vip","gold"),y.setAttribute("vip","gold");break;case 4:n("ac-membership").textContent="Diamond \u{1f48e}",i.setAttribute("vip","diamond"),y.setAttribute("vip","diamond");break;default:n("ac-membership").textContent="None"}{const e=URL.createObjectURL(new Blob([v.avatar],{type:"image/jpeg",endings:"native"}));m.src=b.src=e,await m.decode(),await b.decode(),
URL.revokeObjectURL(e)}{const e=n("ac-games");for(const n of z)if(n.user===k){const{name:r,prev:o,date:i}=n,s=t.createElement("a");s.href=i>0?"/"+i.toString(36):"#",s.title="Play "+r,s.target="_self",s.className="game",s.onclick=e=>{e.ctrlKey||(e.preventDefault(),e.stopPropagation(),q(n))},s.style.backgroundImage=null!=o?'url("'+o+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(r)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=r,s.appendChild(e)}
switch(n.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",s.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",s.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",s.appendChild(e)}break;default:s.style.backgroundImage='url("/res/preview.svg")'}e.appendChild(s)}null==e.firstElementChild&&(e.style.overflow="unset",
e.innerHTML="You have not uploaded any games yet.")}f.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="image/*",e.onchange=async()=>{var t;const n=null===(t=e.files)||void 0===t?void 0:t.item(0);if(null!=n){const e=URL.createObjectURL(n),t=new Image(512,512);t.src=e,t.loading="eager",t.decoding="sync";try{await t.decode(),URL.revokeObjectURL(e)}catch(e){return void o("Error: Failed to decode the image file.")}
const r=Math.min(t.naturalWidth,t.naturalHeight),i=Math.min(r,512),s=new OffscreenCanvas(i,i),a=s.getContext("2d",{alpha:!1});if(null==a)throw Error("Internal Error: Canvas context is null before accessing.");a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.fillStyle="#ffffff",a.fillRect(0,0,i,i),a.drawImage(t,0,0,r,r,0,0,i,i);try{const e=await s.convertToBlob({type:"image/jpeg",quality:100});await p(4,[P,await e.arrayBuffer()]);const t=URL.createObjectURL(e);m.src=b.src=t,
await m.decode(),await b.decode(),URL.revokeObjectURL(t)}catch(e){o("Failed to upload the image file. Message: "+e)}}},e.click()},s.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=i.innerHTML,n.minLength=4,n.maxLength=20,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const a=t.createElement("button");a.type="button",
a.title="Cancel",a.className="cross",e.appendChild(a),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim().toLowerCase();t.length<4||t.length>20?o("Username must be between 4 and 20 characters long."):/^[\-a-z0-9]+$/.test(t)?p(3,[P,t]).then((()=>{e.replaceWith(i),i.textContent=t,y.textContent=t,s.removeAttribute("style")})).catch((e=>{o("Failed to change username. Message: "+e)
})):o("Username must contain only hyphens, 0-9, lowercase a-z")},a.onclick=()=>{e.replaceWith(i),s.removeAttribute("style")},s.style.display="none",i.replaceWith(e),n.select()},a.onclick=()=>{const e=t.createElement("span"),n="https://nettleweb.com/u/"+v.uid;e.textContent=n,a.replaceWith(e),navigator.clipboard.writeText(n)},c.onclick=()=>{const n=t.createElement("div"),r=t.createElement("input");r.type="text",r.value=e.innerHTML,r.minLength=2,r.maxLength=30,r.spellcheck=!1,r.placeholder="Name",
r.autocomplete="off",n.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Save",i.className="tick",n.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",n.appendChild(s),r.onblur=()=>{const e=r.value.trim();e.length>0&&(r.value=e)},i.onclick=()=>{const t=r.value.trim();t.length<2||t.length>30?o("Name must be between 2 and 30 characters long."):p(20,[P,t]).then((()=>{n.replaceWith(e),e.textContent=t,
c.removeAttribute("style")})).catch((e=>{o("Failed to update your name. Message: "+e)}))},s.onclick=()=>{n.replaceWith(e),c.removeAttribute("style")},c.style.display="none",e.replaceWith(n),r.select()},l.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="email",n.value=r.innerHTML,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",e.appendChild(n);const i=t.createElement("button");i.type="button",i.title="Save",i.className="tick",
e.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",e.appendChild(s),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},i.onclick=()=>{const s=n.value.trim().toLowerCase();s.length<6||s.length>320||s.indexOf("@",1)<0?o("Please provide a valid email address."):p(19,[P,s]).then((()=>{{const n=t.createElement("div")
;n.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",e.prepend(n)}n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.placeholder="6-digit verification code",n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},i.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?p(18,[P,t]).then((()=>{e.replaceWith(r),r.textContent=s,l.removeAttribute("style")})).catch((e=>{o("Failed to verify your email. Message: "+e)
})):o("The code provided must have exactly 6 digits.")}})).catch((e=>{o("Failed to update your email address. Message: "+e)}))},s.onclick=()=>{e.replaceWith(r),l.removeAttribute("style")},l.style.display="none",r.replaceWith(e),n.select()},d.onclick=()=>{const e=t.createElement("div");{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:10px 0px;padding:5px;line-height:18px;"),
n.innerHTML="Notice: If your account was created with your Google account and does not have a password, set the current password field to 'CHANGEME!'. After changing your password, previously logged-in sessions will still have access to your account. To revoke the access, click the 'logout all sessions' button down below.",e.appendChild(n)}const n=t.createElement("input");n.type="password",n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Current password",n.autocomplete="off",
e.appendChild(n);const r=t.createElement("input");r.type="password",r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="New password",r.autocomplete="off",e.appendChild(r);const i=t.createElement("input");i.type="password",i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",e.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Change",s.className="tick",e.appendChild(s);const a=t.createElement("button");a.type="button",
a.title="Cancel",a.className="cross",e.appendChild(a),s.onclick=()=>{const t=n.value;if(t.length<8||t.length>30)return void o("The current password must have 8 to 30 characters.");const s=r.value;s.length<8||s.length>30?o("The new password must have 8 to 30 characters."):t!==s?s===i.value?p(9,[P,t,s]).then((()=>{e.replaceWith(d)})).catch((e=>{o("Failed to change password. Message: "+e)
})):o("The confirm password does not match the new password."):o("The new password must be different from the current password.")},a.onclick=()=>{e.replaceWith(d)},d.replaceWith(e)},u.onclick=()=>{p(43,P).then((e=>{"string"==typeof e&&2048===e.length?(M.set("__secrets_",P=e),u.disabled=!0,R.emit("login",P)):o("Error: Remote returned invalid token.")})).catch((e=>{o("Failed to revoke login tokens. Message: "+e)}))},h.onclick=()=>{const e=t.createElement("div");if(h.hasAttribute("data-enabled")){
const n=t.createElement("input");n.type="text",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Change",r.className="tick",e.appendChild(r),r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?p(46,[P,t]).then((()=>{M.set("__?2fa","0"),e.replaceWith(h),h.removeAttribute("data-enabled"),h.textContent="Enable Two-Factor"})).catch((e=>{
o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}else{{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;white-space:pre-wrap;"),
n.innerHTML='In order to enable two-factor authentication (2FA), please follow the steps below:\n1. Install an <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank" rel="noopener">authenticator app</a> if you don\'t have one already.\n2. Scan the QR code below or manually input the secret to save your account onto the authenticator.\n3. Input the 6-digit verification code generated below to verify.\n\nAfter enabling 2FA, you will be required to input the generated 6-digit verification code everytime as you login for enhanced account security.\n\nTo avoid being locked out, save the secret or a screenshot of the QR code across multiple devices, so that it could be restored back into the authenticator in case you lost your data.',
e.appendChild(n)}const n=ra.encode(crypto.getRandomValues(new Uint8Array(new ArrayBuffer(32),0,32)));{const r=t.createElement("img");r.src="data:image/gif;base64,"+aa.encode(Rt("otpauth://totp/NettleWeb:"+w+"?secret="+n+"&issuer=NettleWeb&algorithm=SHA1","gif",{ecc:"low",mask:1,scale:4,border:1})),r.alt="QR Code",r.width=172,r.height=172,r.loading="eager",r.decoding="sync",r.draggable=!1,e.appendChild(r)}{const r=t.createElement("div")
;r.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;"),r.textContent="Secret: "+n,e.appendChild(r)}const r=t.createElement("input");r.type="text",r.minLength=6,r.maxLength=6,r.spellcheck=!1,r.placeholder="6-digit verification code",r.autocomplete="off",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Change",i.className="tick",e.appendChild(i),i.onclick=()=>{const t=r.value.trim()
;6===t.length&&/^\d+$/.test(t)?p(44,[P,n,t]).then((()=>{M.set("__?2fa","1"),e.replaceWith(h),h.setAttribute("data-enabled",""),h.textContent="Disable Two-Factor"})).catch((e=>{o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}const n=t.createElement("button");n.type="button",n.title="Cancel",n.className="cross",e.appendChild(n),n.onclick=()=>{e.replaceWith(h)},h.replaceWith(e)},n("so").onclick=()=>{M.delete("__secrets_"),
setTimeout((()=>g.reload()),200)},n("da").onclick=()=>{o("Error: Operation not permitted.")},n("account-settings").style.display="block"}};if(null!=P){const Sr=await new Promise((e=>{const t=r=>{R.off("lr",t),R.off("le",n),e(null),D=r},n=r=>{R.off("lr",t),R.off("le",n),e(r)};R.on("lr",t),R.on("le",n),R.emit("login",P)}));if(null==Sr)return void await vr();o("Failed to validate login token. Please login again. Message: "+Sr),P=null}const wr=n("login-dialog");let kr,Er,Cr;function xr(){
wr.style.display="none",wr.innerHTML="";{const e=t.createElement("h3");e.textContent="Login",wr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Er||"",e.required=!0,e.minLength=4,e.maxLength=320,e.spellcheck=!1,e.placeholder="Username or email",e.autocomplete="off",wr.appendChild(e);const n=t.createElement("input");n.type="password",n.value=Cr||"",n.required=!0,n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Password",n.autocomplete="off",wr.appendChild(n)
;const r=t.createElement("button");r.type="button",r.className="pri-button",r.textContent="Login",wr.appendChild(r);const i=t.createElement("div");i.tabIndex=0,i.textContent="Register",wr.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Forgot password",wr.appendChild(s);const a=t.createElement("div");a.tabIndex=0,a.textContent="Sign in with Google",wr.appendChild(a),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Er=e.value=t)},n.onblur=()=>{
const e=n.value;e.length>0&&(Cr=e)},r.onclick=()=>{const t=Er=e.value.trim().toLowerCase();if(t.indexOf("@",1)<0){if(t.length<4||t.length>20)return void o("Username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(t))return void o("Username must contain only hyphens, 0-9, lowercase a-z.")}else if(t.length<6||t.length>320)return void o("Invalid email address. (Usernames should not contain a '@' symbol)");const r=Cr=n.value
;r.length<8||r.length>30?o("Password must be between 8 and 30 characters long."):p(10,[t,r]).then((e=>{"string"==typeof e?_r(e):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to retrieve login token. Message: "+e)}))},i.onclick=Tr,s.onclick=Ar,a.onclick=Lr,wr.style.display="block"}function Tr(){wr.style.display="none",wr.innerHTML="";{const e=t.createElement("h3");e.textContent="Register",wr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Er||"",
e.required=!0,e.minLength=4,e.maxLength=20,e.spellcheck=!1,e.placeholder="Username",e.autocomplete="off",wr.appendChild(e);const n=t.createElement("input");n.type="email",n.value=kr||"",n.required=!0,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",wr.appendChild(n);const r=t.createElement("input");r.type="password",r.value=Cr||"",r.required=!0,r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="Password",r.autocomplete="off",wr.appendChild(r)
;const i=t.createElement("input");i.type="password",i.value="",i.required=!0,i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",wr.appendChild(i);const s=t.createElement("button");s.type="button",s.className="pri-button",s.textContent="Register",wr.appendChild(s);const a=t.createElement("div");a.tabIndex=0,a.textContent="Login",wr.appendChild(a);const c=t.createElement("div");c.tabIndex=0,c.textContent="Sign in with Google",wr.appendChild(c),
e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Er=e.value=t)},n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(kr=n.value=e)},r.onblur=()=>{const e=r.value;e.length>0&&(Cr=e)},s.onclick=()=>{const s=Er=e.value.trim().toLowerCase();if(s.length<4||s.length>20)return void o("The username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(s))return void o("The username must contain only hyphens, lowercase a-z and 0-9.")
;const a=kr=n.value.trim().toLowerCase();if(a.length<6||a.length>320||a.indexOf("@",1)<0)return void o("Please provide a valid email.");const l=Cr=r.value;l.length<8||l.length>30?o("The password must be between 8 and 30 characters long."):l===i.value?p(11,[s,l,a]).then((()=>{wr.style.display="none",wr.innerHTML="";{const e=t.createElement("h3");e.textContent="Verify Email",wr.appendChild(e)}{const e=t.createElement("span")
;e.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",wr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value="",e.required=!0,e.minLength=6,e.maxLength=6,e.spellcheck=!1,e.placeholder="6-digit verification code",e.autocomplete="off",wr.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Verify",wr.appendChild(n);{const e=t.createElement("span")
;e.textContent="Notice: If you are using a managed email address (ie. school or work) and did not receive a code in your inbox after several attempts, the code is likely to be blocked by your administrator. In this case, using a personal account could help.",wr.appendChild(e)}wr.appendChild(c),e.onblur=()=>{const t=e.value.trim();t.length>0&&(e.value=t)},n.onclick=()=>{const t=e.value.trim();6===t.length&&/^\d+$/.test(t)?p(17,[s,t]).then((e=>{
"string"==typeof e&&2048===e.length?(M.set("__secrets_",P=e),R.emit("login",P),vr()):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to verify your email address. Message: "+e)})):o("The code provided must have exactly 6 digits.")},wr.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)})):o("The confirm password does not match.")},a.onclick=xr,c.onclick=Lr,wr.style.display="block"}function Ar(){wr.style.display="none",wr.innerHTML="";{
const e=t.createElement("h3");e.textContent="Reset Password",wr.appendChild(e)}const e=t.createElement("input");e.type="email",e.value=kr||"",e.required=!0,e.minLength=6,e.maxLength=320,e.spellcheck=!1,e.placeholder="Email",e.autocomplete="off",wr.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Continue",wr.appendChild(n);const r=t.createElement("div");r.tabIndex=0,r.textContent="Login",wr.appendChild(r);const i=t.createElement("div")
;i.tabIndex=0,i.textContent="Register",wr.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Sign in with Google",wr.appendChild(s),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(kr=e.value=t)},n.onclick=()=>{const n=kr=e.value.trim().toLowerCase();n.length<6||n.length>320||n.indexOf("@",1)<0?o("Please provide a valid email."):p(21,n).then((()=>{wr.style.display="none",wr.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",
wr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and follow the instructions on the email.",wr.appendChild(e)}wr.appendChild(r),wr.appendChild(i),wr.appendChild(s),wr.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)}))},r.onclick=xr,i.onclick=Tr,s.onclick=Lr,wr.style.display="block"}function _r(e){if(2048===e.length)return M.set("__secrets_",P=e),M.set("__?2fa","0"),R.emit("login",P),void vr();wr.style.display="none",
wr.innerHTML="";{const e=t.createElement("h3");e.textContent="Two-Factor Authentication",wr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please open your authenticator app and fill in the generated 6-digit verification code below.",wr.appendChild(e)}const n=t.createElement("input");n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",wr.appendChild(n);const r=t.createElement("button")
;r.type="button",r.className="pri-button",r.textContent="Verify",wr.appendChild(r),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?p(45,[e,t]).then((e=>{"string"==typeof e&&2048===e.length?(M.set("__secrets_",P=e),M.set("__?2fa","1"),R.emit("login",P),vr()):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to login with OTP. Message: "+e)})):o("The code provided must have exactly 6 digits.")},
wr.style.display="block"}function Lr(){const t=new URL("https://accounts.google.com/o/oauth2/v2/auth");{const n=t.searchParams;n.set("client_id","176227430389-qkdboctmfhe9jnvnk2vmarafc5p8amuf.apps.googleusercontent.com"),n.set("redirect_uri",e.origin+"/auth.html"),n.set("response_type","token"),n.set("state","12"),n.set("scope","email profile"),n.set("include_granted_scopes","true"),n.set("enable_granular_consent","true")}g.replace(t)}{const jr=M.get("_cre_")||"";if(jr.length>0){try{
const Ir=await p(0,jr);if("string"!=typeof Ir)return void o("Error: Remote returned invalid token data.");G.click(),_r(Ir)}catch(Or){o("Failed to retrieve login token. Message: "+Or)}M.delete("_cre_")}else xr()}}})(window)})();